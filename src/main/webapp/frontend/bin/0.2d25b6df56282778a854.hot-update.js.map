{"version":3,"sources":["webpack:///./components/editAlbum/Card.jsx","webpack:///./components/editAlbum/editAlbum.less"],"names":["routesModule","require","Card","React","Component","constructor","props","replaceEvent","componentWillReceiveProps","dragContainer","replaceAttached","addEventListener","e","replaceImage","target","attr","getAttribute","picture","pictures","find","p","_id","changePictureAndClear","onMouseDown","preventDefault","parentElement","x","clientX","window","scrollX","y","clientY","scrollY","style","currentStyle","getComputedStyle","elStartLeft","parseInt","left","elStartTop","top","dragObj","changeDragState","dragStarted","dragFrom","dragFromEl","zIndex","onMouseMove","dragState","onMouseUp","event","Event","document","elementFromPoint","dispatchEvent","album","newPictures","images","dragToPicture","dragFromPicture","prevOrder","order","sort","newAlbum","Object","assign","updateOrder","render","openPicture","src","r","isVideo","deleteItem","openDetails","name"],"mappings":"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","file":"0.2d25b6df56282778a854.hot-update.js","sourcesContent":["import React from 'react';\nimport './editAlbum.less';\nimport {CrossIcon, EditIcon} from \"../Icons\";\nconst routesModule = require('../../constants/routes');\nimport http from '../../HttpService';\n\nclass Card extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.replaceEvent = 'replace';\n    }\n\n    componentWillReceiveProps() {\n        if (this.dragContainer && !this.replaceAttached) {\n            this.replaceAttached = true;\n            this.dragContainer.addEventListener(this.replaceEvent, e => this.replaceImage(e.target));\n        }\n    }\n\n    replaceImage(target) {\n\n        const attr = target.getAttribute('imgid');\n        const picture = this.props.pictures.find(p => p._id == attr);\n\n        this.changePictureAndClear(picture);\n    }\n\n    onMouseDown(e, picture) {\n        e.preventDefault();\n\n        const target = e.target.parentElement;\n\n        const x = e.clientX + window.scrollX;\n        const y = e.clientY + window.scrollY;\n\n        const style = target.currentStyle || window.getComputedStyle(target);\n\n        const elStartLeft = parseInt(style.left, 10);\n        const elStartTop = parseInt(style.top, 10);\n        const dragObj = {\n            x, y, elStartLeft, elStartTop\n        }\n        this.props.changeDragState({dragStarted: true, dragFrom: picture, dragObj, dragFromEl: target});\n        target.style.zIndex = 10;\n    }\n\n    onMouseMove(e, picture) {\n        e.preventDefault();\n        const {dragFrom, dragStarted, dragObj} = this.props.dragState;\n        const target = e.target.parentElement;\n        if (dragStarted && dragFrom == picture) {\n            const x = e.clientX + window.scrollX;\n            const y = e.clientY + window.scrollY;\n            target.style.top = (dragObj.elStartTop + y - dragObj.y) + 'px';\n            target.style.left = (dragObj.elStartLeft + x - dragObj.x) + 'px';\n        }\n    }\n\n    onMouseUp(e, picture) {\n        e.preventDefault();\n\n        const {dragFrom, dragFromEl} = this.props.dragState;\n        const target = e.target.parentElement;\n\n        dragFromEl.style.top = '0px';\n        dragFromEl.style.left = '0px';\n\n        target.style.top = '0px';\n        target.style.left = '0px';\n\n        dragFromEl.style.zIndex = 0;\n\n        if (picture == dragFrom) {\n            const event = new Event(this.replaceEvent);\n            document.elementFromPoint(e.clientX + window.scrollX, e.clientY + window.scrollY)\n                .parentElement\n                .dispatchEvent(event);\n            return;\n        }\n\n        this.changePictureAndClear(picture);\n    }\n\n    changePictureAndClear(picture) {\n        const {dragFrom, album} = this.props.dragState;\n\n        const newPictures = [...album.images];\n\n        const dragToPicture = album.images.find(p => p._id == picture._id);\n       // editedPicture.order = prevOrder;\n        const dragFromPicture = album.images.find(p => p._id == dragFrom._id);\n\n        const prevOrder = dragFromPicture.order;\n        dragFromPicture.order = dragToPicture.order;\n        dragToPicture.order = prevOrder;\n\n        newPictures.sort((x, y) => x.order - y.order);\n\n        const newAlbum = Object.assign({}, {\n            ...album,\n            images: newPictures,\n        });\n\n        this.props.updateOrder(newAlbum);\n        this.props.changeDragState({dragStarted: false, dragFrom: null, dragObj: null, dragFromEl: null, album: newAlbum});\n    }\n\n    render() {\n        const {picture, openPicture} = this.props;\n        return openPicture\n            ? <div className='drag_container'\n                   imgid={picture._id}>\n                <img className='drag_image'\n                     src={picture.src}\n                     draggable={false}/>\n            </div>\n            : <div className='drag_container'\n                   ref={r => this.dragContainer = r}\n                   imgid={picture._id}\n                   draggable={true}\n                   onMouseDown={e => this.onMouseDown(e, picture)}\n                   onMouseUp={e => this.onMouseUp(e, picture)}\n                   onMouseMove={e => this.onMouseMove(e, picture)}>\n                {this.props.isVideo()\n                    ? <video height=\"200\" controls=\"controls\" className='drag_video'>\n                    <source src={picture.src}/>\n                </video>\n                    : <img className='drag_image' src={picture.src}/>}\n                <CrossIcon className='cross_icon' onClick={() => this.props.deleteItem(picture)}/>\n                <EditIcon className='edit_icon' onClick={() => this.props.openDetails(picture)}/>\n                <div className='text_description' onClick={() => this.props.openDetails(picture)}>{picture.name}</div>\n            </div>\n    }\n}\n\nexport default Card;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/Card.jsx","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".edit_container {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: row;\\n          flex-direction: row;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -ms-flex-wrap: wrap;\\n      flex-wrap: wrap;\\n  padding: 2rem;\\n  position: relative;\\n}\\n.edit_container .drag_container {\\n  position: relative;\\n  left: 0;\\n  top: 0;\\n  width: 300px;\\n  height: 200px;\\n  margin: 0.5rem;\\n  z-index: 0;\\n}\\n.edit_container .drag_container .cross_icon,\\n.edit_container .drag_container .edit_icon {\\n  position: absolute;\\n  fill: white;\\n  width: 1rem;\\n  height: 1rem;\\n  top: 0.2rem;\\n}\\n.edit_container .drag_container .cross_icon {\\n  right: 0.2rem;\\n}\\n.edit_container .drag_container .edit_icon {\\n  right: 1.5rem;\\n}\\n.edit_container .drag_container .text_description {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  padding: 0 0.3rem;\\n  font-size: 16px;\\n  background-color: rgba(0, 0, 0, 0.4);\\n  color: white;\\n}\\n.edit_container .drag_image {\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  width: 100%;\\n  height: 100%;\\n}\\n.edit_container .drag_video {\\n  -o-object-fit: contain;\\n     object-fit: contain;\\n  width: 100%;\\n  height: 100%;\\n}\\n.edit_container .file_input_wrapper {\\n  width: 300px;\\n  height: 200px;\\n  margin: 0.5rem;\\n}\\n.edit_container .edit_album_card {\\n  position: relative;\\n  width: 300px;\\n  height: 200px;\\n  margin: 0.5rem;\\n  color: white;\\n  box-shadow: 0 0 0.3rem 0.1rem white;\\n}\\n.edit_container .edit_album_card .album_image {\\n  width: 100%;\\n  height: 100%;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n}\\n.edit_container .edit_album_card .album_name {\\n  position: absolute;\\n  bottom: 0.3rem;\\n  left: 0.3rem;\\n  cursor: pointer;\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n.edit_container .edit_album_card .cross_icon {\\n  position: absolute;\\n  width: 3rem;\\n  height: 3rem;\\n  fill: white;\\n  top: 0.3rem;\\n  right: 0.3rem;\\n}\\n.edit_container .new_text {\\n  position: absolute;\\n  width: 70%;\\n  height: 50%;\\n}\\n.edit_container .new_text .save_icon,\\n.edit_container .new_text .cross_icon {\\n  position: absolute;\\n  fill: white;\\n  width: 2rem;\\n  height: 2rem;\\n  top: -2.2rem;\\n}\\n.edit_container .new_text .cross_icon {\\n  right: 0;\\n}\\n.edit_container .new_text .save_icon {\\n  right: 3rem;\\n}\\n.edit_container .new_text textarea,\\n.edit_container .new_text input {\\n  background-color: #232326;\\n  border-radius: 0.3rem;\\n  font-size: 1.5rem;\\n  color: white;\\n  padding: 0.5rem;\\n  line-height: 2rem;\\n  border: white solid 1px;\\n  overflow-x: hidden;\\n  resize: none;\\n  width: 100%;\\n}\\n.edit_container .new_text textarea:focus,\\n.edit_container .new_text input:focus {\\n  outline: none;\\n  background-color: #54545b;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/autoprefixer-loader!./node_modules/less-loader/dist/cjs.js!./node_modules/js-to-styles-var-loader!./components/editAlbum/editAlbum.less\n// module id = 43\n// module chunks = 0"],"sourceRoot":""}