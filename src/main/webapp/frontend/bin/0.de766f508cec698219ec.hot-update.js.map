{"version":3,"sources":["webpack:///./components/editAlbum/ImageRotater.jsx"],"names":["isFileAPISupported","File","AvatarEditor","React","Component","state","image","setCanvas","canvas","isVertical","props","rotate","isDataURL","str","regex","match","loadImage","loadImageFile","loadImageURL","imageURL","imageObj","Image","onload","handleImageReady","bind","onerror","onLoadFailure","crossOrigin","src","imageFile","reader","FileReader","e","target","result","readAsDataURL","componentDidMount","componentDidUpdate","ReactDOM","findDOMNode","context","getContext","clearRect","width","height","paintImage","setState","onImageReady","onLoadSuccess","componentWillReceiveProps","newProps","save","translate","Math","PI","scale","globalCompositeOperation","drawImage","restore","getImage","document","createElement","render","defaultStyle","cursor","attributes","style","propTypes","PropTypes","number","oneOfType","string","instanceOf","object","oneOf","func","loading","bool","defaultProps"],"mappings":"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","file":"0.de766f508cec698219ec.hot-update.js","sourcesContent":["import PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport Loader from 'react-loaders';\nimport 'loaders.css/src/animations/ball-scale-multiple.scss';\n\nconst isFileAPISupported = typeof File !== 'undefined'\n\nclass AvatarEditor extends React.Component {\n    static propTypes = {\n        rotate: PropTypes.number,\n        image: PropTypes.oneOfType([\n            PropTypes.string,\n            ...(isFileAPISupported ? [PropTypes.instanceOf(File)] : [])\n        ]),\n        width: PropTypes.number,\n        height: PropTypes.number,\n        style: PropTypes.object,\n        crossOrigin: PropTypes.oneOf(['', 'anonymous', 'use-credentials']),\n\n        onLoadFailure: PropTypes.func,\n        onLoadSuccess: PropTypes.func,\n        onImageReady: PropTypes.func,\n        loading: PropTypes.bool\n    }\n\n    static defaultProps = {\n        rotate: 0,\n        width: 300,\n        height: 200,\n        style: {},\n        onLoadFailure () {},\n        onLoadSuccess () {},\n        onImageReady () {},\n        loading: false\n    }\n\n    state = {\n        image: null\n    }\n\n    isVertical () {\n        return this.props.rotate % 180 !== 0\n    }\n\n    isDataURL (str) {\n        if (str === null) {\n            return false\n        }\n        const regex = /^\\s*data:([a-z]+\\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*\\s*$/i\n        return !!str.match(regex)\n    }\n\n    loadImage (image) {\n        if (isFileAPISupported && image instanceof File) {\n            this.loadImageFile(image)\n        } else if (typeof image === 'string') {\n            this.loadImageURL(image)\n        }\n    }\n\n    loadImageURL (imageURL) {\n        const imageObj = new Image()\n        imageObj.onload = this.handleImageReady.bind(this, imageObj)\n        imageObj.onerror = this.props.onLoadFailure\n        if (!this.isDataURL(imageURL) && this.props.crossOrigin) { imageObj.crossOrigin = this.props.crossOrigin }\n        imageObj.src = imageURL\n    }\n\n    loadImageFile (imageFile) {\n        const reader = new FileReader()\n        reader.onload = e => this.loadImageURL(e.target.result)\n        reader.readAsDataURL(imageFile)\n    }\n\n    componentDidMount () {\n        if (this.props.image) {\n            this.loadImage(this.props.image)\n        }\n    }\n\n    componentDidUpdate () {\n        if (this.canvas) {\n            const canvas = ReactDOM.findDOMNode(this.canvas)\n            const context = canvas.getContext('2d')\n            context.clearRect(0, 0, canvas.width, canvas.height)\n            this.paintImage(context, this.state.image);\n        }\n    }\n\n    handleImageReady (image) {\n        this.setState({ image }, this.props.onImageReady)\n        this.props.onLoadSuccess(image)\n    }\n\n    componentWillReceiveProps (newProps) {\n        if (\n            (newProps.image && this.props.image !== newProps.image) ||\n            this.props.width !== newProps.width ||\n            this.props.height !== newProps.height\n        ) {\n            this.loadImage(newProps.image)\n        }\n    }\n\n    paintImage (context, image) {\n        if (image) {\n\n            context.save()\n\n            context.translate(context.canvas.width / 2, context.canvas.height / 2)\n            context.rotate(this.props.rotate * Math.PI / 180)\n            context.translate(\n                -(context.canvas.width / 2),\n                -(context.canvas.height / 2)\n            )\n\n            if (this.isVertical()) {\n                context.translate(\n                    (context.canvas.width - context.canvas.height) / 2,\n                    (context.canvas.height - context.canvas.width) / 2\n                )\n            }\n\n            context.scale(1, 1)\n\n            context.globalCompositeOperation = 'destination-over';\n\n            if(this.isVertical()) {\n                context.drawImage(\n                    image,\n                    0, 0, this.props.height, this.props.width\n                )\n            }\n            context.drawImage(\n                image,\n                0, 0, this.props.width, this.props.height\n            )\n\n            context.restore()\n        }\n    }\n\n    setCanvas = (canvas) => {\n        this.canvas = canvas\n    }\n\n    getImage () {\n        const image = this.state.image;\n\n        // create a canvas with the correct dimensions\n        const canvas = document.createElement('canvas')\n\n        if (this.isVertical()) {\n            canvas.width = image.height;\n            canvas.height = image.width;\n        } else {\n            canvas.width = image.width;\n            canvas.height = image.height\n        }\n\n        // draw the full-size image at the correct position,\n        // the image gets truncated to the size of the canvas.\n        const context = canvas.getContext('2d')\n\n        context.translate(canvas.width / 2, canvas.height / 2)\n        context.rotate(this.props.rotate * Math.PI / 180)\n        context.translate(-(canvas.width / 2), -(canvas.height / 2))\n\n        if (this.isVertical()) {\n            context.translate(\n                (canvas.width - canvas.height) / 2,\n                (canvas.height - canvas.width) / 2\n            )\n        }\n\n        context.drawImage(image, 0, 0)\n\n        return canvas\n    }\n\n    render () {\n        // if(this.props.loading) {\n            return <Loader type=\"ball-scale-multiple\"/>;\n        // }\n\n        const defaultStyle = {\n            width: this.props.width,\n            height: this.props.height,\n            cursor: 'grab'\n        }\n\n        const attributes = {\n            width: this.props.width,\n            height: this.props.height,\n            style: {\n                ...defaultStyle,\n                ...this.props.style\n            }\n        }\n\n        return <canvas ref={this.setCanvas} {...attributes} />\n    }\n}\n\nexport default AvatarEditor\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/ImageRotater.jsx"],"sourceRoot":""}