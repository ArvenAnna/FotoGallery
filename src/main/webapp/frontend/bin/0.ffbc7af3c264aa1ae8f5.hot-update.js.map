{"version":3,"sources":["webpack:///./components/FotoSlider.jsx","webpack:///./components/Header.jsx","webpack:///./components/newAlbum/AddNewAlbum.jsx","webpack:///./components/AlbumContainer.jsx","webpack:///./components/picture/Picture.jsx","webpack:///./components/picture/PreviewImageFrame.jsx","webpack:///./components/editAlbum/EditAlbum.jsx","webpack:///./components/editAlbum/Card.jsx","webpack:///./components/dialog/Dialog.jsx","webpack:///./components/dialog/dialog.less?43df","webpack:///./components/editAlbum/EditCanvas.jsx","webpack:///./components/editAlbum/editCanvas.less?0ae2","webpack:///./components/editAlbum/ImageRotater.jsx","webpack:///./actions/albumActions.js","webpack:///./components/editAlbum/editAlbum.less","webpack:///./components/dialog/dialog.less","webpack:///./components/editAlbum/editCanvas.less","webpack:///./components/fileInput/FileInput.jsx","webpack:///./components/editAlbum/editAlbum.less?150b","webpack:///./components/Icons.jsx"],"names":["Page","styled","div","Content","constants","preview_frame_color","FotoSlider","React","Component","constructor","props","state","addAlbumModal","createAlbum","setState","closeModal","render","HeaderContainer","HeaderMenu","MenuItem","shadow_color","text_color","Search","SearchInput","input","body_color","body_color_light","Header","connect","store","fetchAlbumsBySearch","fetchAlbums","onEnter","e","key","target","value","history","push","routesModule","require","Label","span","AddNewAlbum","modal","height","name","description","src","componentDidMount","window","addEventListener","calculateModalHeight","w","d","document","documentElement","g","getElementsByTagName","y","innerHeight","clientHeight","modalStyle","currentStyle","getComputedStyle","Math","min","parseInt","uploadFile","file","http","sendFile","routes","UPLOAD_FOTO","then","id","r","Container","AlbumContainer","albums","map","album","_id","Picture","magnify","valid","click","animation","closePreview","mouseLeave","chooseAnimation","mouseEnter","fade","move","findSide","direction","clientRect","getClientRects","diffs","side","diff","abs","clientX","left","right","clientY","top","bottom","minDiff","Array","from","el","find","handleBrokenImg","main","images","PreviewImageFrame","img","current","currentIndex","indexOf","imageWidth","length","setImageWidth","getImageContainerWidth","changeImageWidth","componentWillUnmount","removeEventListener","imageRect","getBoundingClientRect","width","componentDidUpdate","prevProps","prevState","setTimeout","onCrossClick","close","onArrowClick","arrow","clearAnimate","editRoute","node","EditAlbum","deleteFotoFromAlbum","saveFotoDescription","saveAlbumDescription","deleteAlbum","saveItemsOrder","dragStarted","dragFrom","dragFromEl","dragObj","openPicture","openedAlbum","openedDialog","imageDownloaded","loadAlbum","doGet","GET_ALBUM","match","params","result","sort","x","order","forEach","image","Date","toISOString","openDetails","picture","openAlbumDetails","deleteItem","newPictures","filter","p","newAlbum","Object","assign","removeAlbum","changeState","obj","editedPicture","pinput","ptextarea","text","editedAlbum","ainput","atextarea","downloadedFoto","isVideo","splitArray","split","format","replaceImage","i","t","Card","replaceEvent","componentWillReceiveProps","dragContainer","replaceAttached","attr","getAttribute","pictures","changePictureAndClear","onMouseDown","preventDefault","parentElement","scrollX","scrollY","style","elStartLeft","elStartTop","changeDragState","zIndex","onMouseMove","dragState","onMouseUp","event","Event","elementFromPoint","dispatchEvent","dragToPicture","dragFromPicture","prevOrder","updateOrder","rotateImage","doPut","ROTATE_FOTO","Dialog","onClose","onClick","EditCanvas","angle","getEditedImage","avatar","getImage","toBlob","File","doPost","FOTO_ROUTE","cleanImage","newAngle","calculateParameters","newState","naturalWidth","naturalHeight","onLoad","imgInfo","closeImage","ae","isFileAPISupported","AvatarEditor","setCanvas","canvas","isVertical","rotate","isDataURL","str","regex","loadImage","loadImageFile","loadImageURL","imageURL","imageObj","Image","onload","handleImageReady","bind","onerror","onLoadFailure","crossOrigin","imageFile","reader","FileReader","readAsDataURL","ReactDOM","findDOMNode","context","getContext","clearRect","paintImage","onImageReady","onLoadSuccess","newProps","save","translate","PI","scale","globalCompositeOperation","drawImage","restore","createElement","defaultStyle","cursor","attributes","propTypes","PropTypes","number","oneOfType","string","instanceOf","object","oneOf","func","defaultProps","albumsRequest","type","REQ_ALBUMS","setAlbums","dispatch","GET_ALBUMS","search","GET_ALBUMS_SEARCH","doDelete","DELETE_FOTO","DELETE_ALBUM","UPDATE_FOTO","ALBUM_ROUTE","UPDATE_ITEMS_ORDER","FileInput","onChange","files","label","disabled","Icon","theme","content","LeftArrowIcon","RightArrowIcon","MagnifierIcon","CrossIcon","EditIcon","SaveIcon","RotateIcon"],"mappings":"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","file":"0.ffbc7af3c264aa1ae8f5.hot-update.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport Header from \"./Header\";\nimport AddNewAlbum from \"./newAlbum/AddNewAlbum\";\nimport AlbumContainer from \"./AlbumContainer\";\nimport Scroll from \"./scroll/Scroll\";\nimport ProgressScroll from \"./scroll/ProgressScroll\";\nimport {Route, Switch} from \"react-router-dom\";\nimport EditAlbum from \"./editAlbum/EditAlbum\";\nimport constants from '../constants/styles';\n\n\nconst Page = styled.div`\n    margin: 2rem 10rem;\n    display: flex;\n    flex-direction: row;\n    justify-content: space-evenly;\n    \n   font-size:2rem;\n`\n\nconst Content = styled.div`\n    background-color: black;\n    width: 100%;\n    box-shadow: 5px 5px 5px 5px ${constants.preview_frame_color};\n`\n\nclass FotoSlider extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            addAlbumModal: false\n        }\n    }\n\n    createAlbum() {\n        this.setState({\n            addAlbumModal: true\n        });\n    }\n\n    closeModal() {\n        this.setState({\n            addAlbumModal: false\n        });\n    }\n\n    render() {\n        return (\n            <Page>\n                {this.state.addAlbumModal && <AddNewAlbum closeModal={() => this.closeModal()}/>}\n                <Content>\n                    <Header createAlbum={() => this.createAlbum()}/>\n                    <Switch>\n                        <Route exact path='/' component={AlbumContainer}/>\n                        <Route path='/edit/:id' component={EditAlbum}/>\n                    </Switch>\n                </Content>\n            </Page>\n\n        );\n    }\n}\n\nexport default FotoSlider;\n\n\n// WEBPACK FOOTER //\n// ./components/FotoSlider.jsx","import React from 'react';\nimport styled from 'styled-components';\nimport connect from \"react-redux/es/connect/connect\";\nimport {fetchAlbums, fetchAlbumsBySearch} from \"../actions/albumActions\";\nimport withRouter from \"react-router-dom/es/withRouter\";\nimport {NavLink} from 'react-router-dom';\nimport constants from '../constants/styles';\n\nconst HeaderContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  color: white;\n  font-size: 1.2rem;\n`\n\nconst HeaderMenu = styled.div`\n  flex-grow: 1;\n  display: flex;\n  flex-direction: row;\n\n`\n\nconst MenuItem = styled.div`\n  padding: 1rem;\n  cursor: pointer;\n  text-shadow: 2px 2px ${constants.shadow_color};\n  \n  &:hover {\n    color: ${constants.shadow_color};\n    text-shadow: none;\n    a {\n        color: ${constants.shadow_color};\n    }\n  }\n  \n  a {\n    text-decoration: none;\n    color: ${constants.text_color};\n  }\n  \n`\n\nconst Search = styled.div`\n  padding: 1rem;\n  text-shadow: 2px 2px ${constants.shadow_color};\n  font-size: 1rem;\n`\n\nconst SearchInput = styled.input`\n    background-color: ${constants.body_color};\n    color: ${constants.text_color};\n    padding-left: 3px;\n    \n    &:focus {\n        outline: none;\n        background-color: ${constants.body_color_light};\n    }\n`\n\n@withRouter\n@connect(store => ({}), {\n    fetchAlbumsBySearch,\n    fetchAlbums\n})\nclass Header extends React.Component {\n\n    onEnter(e) {\n        if (e.key == \"Enter\") {\n            if(e.target.value) this.props.fetchAlbumsBySearch(e.target.value);\n            else this.props.fetchAlbums();\n            this.props.history.push('/');\n        }\n    }\n\n    render() {\n        return (\n            <HeaderContainer>\n                <HeaderMenu>\n                    <MenuItem onClick={this.props.createAlbum}>new album</MenuItem>\n                    <MenuItem><NavLink to='/'>album's list</NavLink></MenuItem>\n                </HeaderMenu>\n                <Search>Search: <SearchInput defaultValue=''\n                    onKeyPress={(e) => this.onEnter(e)}/></Search>\n            </HeaderContainer>\n        );\n    }\n}\n\nexport default Header;\n\n\n// WEBPACK FOOTER //\n// ./components/Header.jsx","import React from 'react';\nimport styled from 'styled-components';\nimport {CrossIcon} from \"../Icons\";\nimport FileInput from \"../fileInput/FileInput\";\nimport './addNewAlbum.less';\nimport Scroll from \"../scroll/Scroll\";\nimport connect from \"react-redux/es/connect/connect\";\nconst routesModule = require('../../constants/routes');\nimport http from '../../HttpService';\nimport {\n    createAlbum\n} from \"../../actions/albumActions\";\n\nconst Label = styled.span`\n  width: 100%;\n  margin-bottom: 0.25rem;\n`\n\n@connect(store => ({}), {\n    createAlbum\n})\nclass AddNewAlbum extends React.Component {\n    constructor(props) {\n        super(props);\n        this.modal = null;\n        this.state = {\n            height: '100%',\n            name: '',\n            description: '',\n            src: null\n        }\n    }\n\n    componentDidMount() {\n        window.addEventListener('resize', () => this.calculateModalHeight())\n        this.calculateModalHeight();\n    }\n\n    calculateModalHeight() {\n        var w = window,\n            d = document,\n            e = d.documentElement,\n            g = d.getElementsByTagName('body')[0],\n            y = w.innerHeight || e.clientHeight || g.clientHeight;\n\n        if (this.modal) {\n            const modalStyle = this.modal.currentStyle || window.getComputedStyle(this.modal);\n            const height = Math.min(parseInt(y), parseInt(modalStyle.height)) + 'px';\n            this.setState({\n                height\n            });\n        }\n    }\n\n    uploadFile(file) {\n        http.sendFile(routesModule.routes.UPLOAD_FOTO, file)\n            .then(id => {\n                this.setState({src: id.src});\n            });\n    }\n\n    createAlbum() {\n        const {name, description, src} = this.state;\n        if (name && description && src) {\n            this.props.createAlbum({\n                name, description, src\n            });\n            this.props.closeModal();\n        }\n\n    }\n\n    render() {\n        const {name, description, src, height} = this.state;\n\n        return <div className='add_album'>\n            {/*<Scroll width='40%' height={height} className='scroll_container'>*/}\n            <div className='add_album_modal' ref={r => this.modal = r}>\n\n                <CrossIcon onClick={this.props.closeModal}/>\n                <Label>Name</Label>\n                <input value={name} onChange={(e) => this.setState({name: e.target.value})}/>\n                <Label>Title image:</Label>\n                {src ? <img src={src}/> :\n                    <FileInput label='Choose main foto'\n                               uploadFile={(file) => this.uploadFile(file)}/>}\n                <Label>Description</Label>\n                <textarea value={description} onChange={(e) => this.setState({description: e.target.value})}/>\n                <button onClick={() => this.createAlbum()}>ok</button>\n\n            </div>\n        {/*</Scroll>*/}\n        </div>\n\n    }\n}\n\nexport default AddNewAlbum;\n\n\n// WEBPACK FOOTER //\n// ./components/newAlbum/AddNewAlbum.jsx","import React from 'react';\nimport styled from 'styled-components';\nimport Picture from \"./picture/Picture\";\nimport connect from \"react-redux/es/connect/connect\";\nimport {fetchAlbums} from \"../actions/albumActions\";\n\n// overrides picture styles\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 2rem;\n\n  &>div {\n     padding: 1rem;\n        \n     .image {\n        height: 15rem;\n        width: 20rem;\n        object-fit: cover;\n      }\n\n      .image_wrapper .overlay .overlay_bottom_text {\n         font-size: 1rem;\n      }\n  }\n`\n@connect(store => ({\n    albums: store.albums\n}), {\n    fetchAlbums\n})\nclass AlbumContainer extends React.Component {\n    constructor(props) {\n        super(props);\n        this.props.fetchAlbums();\n    }\n\n    render() {\n        return (\n            <Container>\n                {this.props.albums.map(album => <Picture key={album._id}\n                                                         animation='fade'\n                                                         album={album}\n                />)}\n\n            </Container>\n        );\n    }\n}\n\nexport default AlbumContainer;\n\n\n// WEBPACK FOOTER //\n// ./components/AlbumContainer.jsx","import React from \"react\";\nimport {MagnifierIcon} from \"../Icons\";\nimport \"./picture.less\";\nimport Preview from \"./Preview\";\n\nclass Picture extends React.Component {\n    // animation: fade, move\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            magnify: '',\n            valid: true\n        };\n    }\n\n    click() {\n        this.setState({\n            magnify: 'magnify',\n            animation: ''\n        });\n    };\n\n    closePreview() {\n        this.setState({\n            magnify: ''\n        });\n    }\n\n    mouseLeave(e) {\n        !this.state.magnify && this.chooseAnimation(e, 'fade_out', 'from');\n    };\n\n    mouseEnter(e) {\n        !this.state.magnify && this.chooseAnimation(e, 'fade_in', 'to');\n    };\n\n    chooseAnimation(e, fade, move) {\n        switch (this.props.animation) {\n            case 'fade':\n                this.setState({\n                    animation: fade\n                });\n                break;\n            case 'move':\n                this.setState({\n                    animation: this.findSide(e, move)\n                });\n        }\n    }\n\n    findSide(e, direction) {\n        const clientRect = e.target.getClientRects()[0];\n        const diffs = [\n            {\n                side: `move_${direction}_right`,\n                diff: Math.abs(e.clientX - clientRect.left)\n            }, {\n                side: `move_${direction}_left`,\n                diff: Math.abs(e.clientX - clientRect.right)\n            }, {\n                side: `move_${direction}_bottom`,\n                diff: Math.abs(e.clientY - clientRect.top)\n            }, {\n                side: `move_${direction}_top`,\n                diff: Math.abs(e.clientY - clientRect.bottom)\n            }\n        ];\n\n        const minDiff = Math.min(...Array.from(diffs, el => el.diff));\n        return diffs.find(el => el.diff == minDiff).side;\n    }\n\n    handleBrokenImg(e) {\n        this.setState({\n            valid: false\n        })\n    }\n\n    render() {\n        const {album} = this.props;\n        const main = album.images[0];\n        const {animation, magnify} = this.state;\n        return this.state.valid && <div>\n                <div\n                    className={`image_wrapper ${animation} ${magnify}`}\n                    onMouseLeave={(e) => this.mouseLeave(e)}\n                    onMouseEnter={(e) => this.mouseEnter(e)}\n                    onClick={(e) => this.click(e)}\n                >\n                    <img className='image'\n                         onError={(e) => this.handleBrokenImg(e)}\n                         src={main.src}\n                         alt=\"something wrong happens\"/>\n                    <div className={'overlay'}>\n                        <div className={`overlay_top`}>\n                            <MagnifierIcon/>\n                        </div>\n                        <div className={`overlay_bottom`}>\n                            <div className='overlay_bottom_text'>{album.name}</div>\n                        </div>\n                    </div>\n                </div>\n                {magnify &&\n                <Preview main={main}\n                         close={() => this.closePreview()}\n                         editRoute={`/edit/${album._id}`}\n                         images={album.images}/>}\n            </div>;\n    }\n}\n\nexport default Picture;\n\n\n// WEBPACK FOOTER //\n// ./components/picture/Picture.jsx","import React from \"react\";\nimport {CrossIcon, EditIcon, LeftArrowIcon, RightArrowIcon} from \"../Icons\";\nimport \"./preview.less\";\nimport {Link} from \"react-router-dom\";\n\nclass PreviewImageFrame extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.img = null;\n\n    const current = props.images.find(img => img.src === props.main.src);\n    const currentIndex = props.images.indexOf(current);\n\n    this.state = {\n      imageWidth: 0,\n      main: props.main,\n      left: currentIndex > 0,\n      right: currentIndex < (props.images.length - 1)\n    };\n  }\n\n  componentDidMount() {\n    this.props.setImageWidth(this.getImageContainerWidth());\n    window.addEventListener('resize', () => this.changeImageWidth());\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', () => this.changeImageWidth());\n  }\n\n  getImageContainerWidth() {\n    const img = this.img;\n    if (!img) return 0;\n    const imageRect = img.getBoundingClientRect();\n    return imageRect.width;\n  }\n\n  changeImageWidth() {\n    this.props.setImageWidth(this.getImageContainerWidth());\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.main != this.state.main) {\n      // in order to make sure width will be recalculated\n      window.setTimeout(() => this.changeImageWidth(), 100);\n    }\n  }\n\n  onCrossClick() {\n    this.props.close();\n  }\n\n  onArrowClick(arrow) {\n    const {images} = this.props;\n    //const current = images.find(img => img === this.state.main);\n    const currentIndex = images.indexOf(this.state.main);\n    let main;\n\n    if (arrow === 'left' && currentIndex > 0) {\n      main = images[currentIndex - 1];\n      this.setState({\n        main,\n        left: (currentIndex - 1) > 0,\n        right: (currentIndex - 1) < (images.length - 1)\n      });\n    }\n\n    if (arrow === 'right' && currentIndex < (images.length - 1)) {\n        main = images[currentIndex + 1];\n        this.setState({\n        main,\n        left: (currentIndex + 1) > 0,\n        right: (currentIndex + 1) < (images.length - 1)\n      })\n    }\n\n    this.props.clearAnimate(main);\n  }\n\n  render() {\n    const {main, left, right} = this.state;\n    const {images, editRoute} = this.props;\n\n    return (<div className='magnify_modal_img_frame_container'>\n        <CrossIcon className='cross' onClick={() => this.onCrossClick()}/>\n            {editRoute && <Link to={this.props.editRoute}><EditIcon className='edit'/></Link>}\n        {left && <div className='left_arrow'>\n          <LeftArrowIcon onClick={() => this.onArrowClick('left')}/>\n        </div>}\n        {right && <div className='right_arrow'>\n          <RightArrowIcon onClick={() => this.onArrowClick('right')}/>\n        </div>}\n        <div className='counter_container'>\n          <div className='counter'>{`${(images.indexOf(main) + 1)} of ${images.length}`}</div>\n        </div>\n        <img src={main.src} className='image_preview' ref={node => this.img = node}/>\n      </div>\n    );\n  }\n}\n\nexport default PreviewImageFrame;\n\n\n// WEBPACK FOOTER //\n// ./components/picture/PreviewImageFrame.jsx","import React from 'react';\nimport './editAlbum.less';\nimport FileInput from \"../fileInput/FileInput\";\nimport {CrossIcon, SaveIcon} from \"../Icons\";\nimport Card from \"./Card\";\nimport http from '../../HttpService';\nimport connect from \"react-redux/es/connect/connect\";\nimport {\n    deleteAlbum, deleteFotoFromAlbum, saveAlbumDescription,\n    saveFotoDescription, saveItemsOrder\n} from \"../../actions/albumActions\";\nimport Dialog from \"../dialog/Dialog\";\nimport EditCanvas from \"./EditCanvas\";\nconst routesModule = require('../../constants/routes');\n\n@connect(store => ({}), {\n    deleteFotoFromAlbum,\n    saveFotoDescription,\n    saveAlbumDescription,\n    deleteAlbum,\n    saveItemsOrder\n})\nclass EditAlbum extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            dragStarted: false,\n            dragFrom: null,\n            dragFromEl: null,\n            dragObj: null,\n            openPicture: null,\n            openedAlbum: false,\n            album: null,\n            openedDialog: false,\n            imageDownloaded: false\n        }\n    }\n\n    componentDidMount() {\n        this.loadAlbum();\n    }\n\n    loadAlbum() {\n        http.doGet(routesModule.routes.GET_ALBUM(this.props.match.params.id))\n            .then(result => {\n                result.images.sort((x, y) => x.order - y.order);\n                result.images.forEach(image => image.src = image.src + '?forceUpdate=' + new Date().toISOString())\n                this.setState({album: result})\n            });\n    }\n\n    openDetails(picture) {\n        this.setState({openPicture: picture});\n    }\n\n    openAlbumDetails() {\n        this.setState({openedAlbum: true});\n    }\n\n    onCrossClick() {\n        this.setState({openPicture: null, openedAlbum: false});\n    }\n\n    deleteItem(picture) {\n        if (this.state.album.images.length == 1) {\n            this.setState({openedDialog: true});\n            return;\n        }\n\n        this.props.deleteFotoFromAlbum(picture._id);\n        const newPictures = this.state.album.images.filter(p => p._id != picture._id);\n        const newAlbum = Object.assign({}, {\n            ...this.state.album,\n            images: newPictures,\n        })\n        this.setState({album: newAlbum});\n    }\n\n    removeAlbum() {\n        this.props.deleteAlbum(this.state.album._id);\n        this.props.history.push('/');\n    }\n\n    changeState(obj) {\n        this.setState(obj);\n    }\n\n    saveFotoDescription(picture) {\n        const newPictures = [...this.state.album.images];\n        const editedPicture = this.state.album.images.find(p => p._id == picture._id);\n        if (this.pinput.value) editedPicture.name = this.pinput.value;\n        if (this.ptextarea.value) editedPicture.text = this.ptextarea.value;\n\n        this.props.saveFotoDescription(this.state.album._id, editedPicture);\n\n        const newAlbum = Object.assign({}, {\n            ...this.state.album,\n            images: newPictures,\n        });\n        this.setState({album: newAlbum, openPicture: null});\n    }\n\n    saveAlbumDescription() {\n        const editedAlbum = Object.assign({}, {...this.state.album});\n        if (this.ainput.value) editedAlbum.name = this.ainput.value;\n        if (this.atextarea.value) editedAlbum.description = this.atextarea.value;\n\n        this.props.saveAlbumDescription(editedAlbum);\n\n        this.setState({album: editedAlbum, openedAlbum: false});\n    }\n\n    uploadFile(file) {\n        http.sendFile(routesModule.routes.UPLOAD_FOTO, file)\n               .then(downloadedFoto => {\n                   this.setState({\n                       imageDownloaded: downloadedFoto.src\n                   });\n               });\n    }\n\n    render() {\n        const {openPicture, album, openedAlbum, openedDialog, imageDownloaded} = this.state;\n        let isVideo = false;\n        if (imageDownloaded) {\n            const splitArray = imageDownloaded.split('/');\n            let format = splitArray[splitArray.length - 1].split('.');\n            format = format[format.length - 1];\n            isVideo = (format == 'mp4');\n        }\n        return album && (\n                    <div className='edit_container'>\n                        <div className='edit_album_card'>\n                            <img className='album_image' src={album.images[0].src}/>\n                            <div className='album_name' onClick={() => this.openAlbumDetails()}>{album.name}</div>\n                            <CrossIcon className='cross_icon' onClick={() => this.setState({openedDialog: true})}/>\n                        </div>\n                        {album.images.sort((x, y) => x.order - y.order).map(p => <Card\n                            key={p._id}\n                            picture={p}\n                            pictures={album.images}\n                            openDetails={(p) => this.openDetails(p)}\n                            deleteItem={(p) => this.deleteItem(p)}\n                            replaceImage={(target) => this.replaceImage(target)}\n                            openPicture={openPicture}\n                            changeDragState={(obj) => this.changeState(obj)}\n                            dragState={this.state}\n                            updateOrder={(album) => this.props.saveItemsOrder(album)}\n                            loadAlbum={() => this.loadAlbum()}\n                        />)}\n                        {!imageDownloaded && <FileInput className='new_image'\n                                   disabled={openPicture}\n                                   label='Choose new foto'\n                                   uploadFile={(file) => this.uploadFile(file)}\n                        />}\n                        {\n                            imageDownloaded && (!isVideo ? <EditCanvas\n                            image={imageDownloaded}\n                            cleanImage={obj => this.changeState(obj)}\n                            album={album}\n                            /> : <video><source src='imageDownloaded'/></video>)}\n                        {openPicture &&\n                        <div className='new_text'>\n                            <input defaultValue={openPicture.name} ref={i => this.pinput = i}/>\n                            <textarea defaultValue={openPicture.text} ref={t => this.ptextarea = t}/>\n                            <SaveIcon className='save_icon' onClick={() => this.saveFotoDescription(openPicture)}/>\n                            <CrossIcon className='cross_icon' onClick={() => this.onCrossClick()}/>\n                        </div>}\n                        {openedAlbum &&\n                        <div className='new_text'>\n                            <input defaultValue={album.name} ref={i => this.ainput = i}/>\n                            <textarea defaultValue={album.description} ref={t => this.atextarea = t}/>\n                            <SaveIcon className='save_icon' onClick={() => this.saveAlbumDescription()}/>\n                            <CrossIcon className='cross_icon' onClick={() => this.onCrossClick()}/>\n                        </div>}\n                        {openedDialog && <Dialog onClick={() => this.removeAlbum()}\n                        onClose={() => this.setState({openedDialog: false})}\n                                                 text=\"Do you really want to delete the album?\"/>}\n                    </div>\n            );\n    }\n}\n\nexport default EditAlbum;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/EditAlbum.jsx","import React from 'react';\nimport './editAlbum.less';\nimport {CrossIcon, EditIcon} from \"../Icons\";\nconst routesModule = require('../../constants/routes');\nimport http from '../../HttpService';\n\nclass Card extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.replaceEvent = 'replace';\n    }\n\n    componentWillReceiveProps() {\n        if (this.dragContainer && !this.replaceAttached) {\n            this.replaceAttached = true;\n            this.dragContainer.addEventListener(this.replaceEvent, e => this.replaceImage(e.target));\n        }\n    }\n\n    replaceImage(target) {\n\n        const attr = target.getAttribute('imgid');\n        const picture = this.props.pictures.find(p => p._id == attr);\n\n        this.changePictureAndClear(picture);\n    }\n\n    onMouseDown(e, picture) {\n        e.preventDefault();\n\n        const target = e.target.parentElement;\n\n        const x = e.clientX + window.scrollX;\n        const y = e.clientY + window.scrollY;\n\n        const style = target.currentStyle || window.getComputedStyle(target);\n\n        const elStartLeft = parseInt(style.left, 10);\n        const elStartTop = parseInt(style.top, 10);\n        const dragObj = {\n            x, y, elStartLeft, elStartTop\n        }\n        this.props.changeDragState({dragStarted: true, dragFrom: picture, dragObj, dragFromEl: target});\n        target.style.zIndex = 10;\n    }\n\n    onMouseMove(e, picture) {\n        e.preventDefault();\n        const {dragFrom, dragStarted, dragObj} = this.props.dragState;\n        const target = e.target.parentElement;\n        if (dragStarted && dragFrom == picture) {\n            const x = e.clientX + window.scrollX;\n            const y = e.clientY + window.scrollY;\n            target.style.top = (dragObj.elStartTop + y - dragObj.y) + 'px';\n            target.style.left = (dragObj.elStartLeft + x - dragObj.x) + 'px';\n        }\n    }\n\n    onMouseUp(e, picture) {\n        e.preventDefault();\n\n        const {dragFrom, dragFromEl} = this.props.dragState;\n        const target = e.target.parentElement;\n\n        dragFromEl.style.top = '0px';\n        dragFromEl.style.left = '0px';\n\n        target.style.top = '0px';\n        target.style.left = '0px';\n\n        dragFromEl.style.zIndex = 0;\n\n        if (picture == dragFrom) {\n            const event = new Event(this.replaceEvent);\n            document.elementFromPoint(e.clientX + window.scrollX, e.clientY + window.scrollY)\n                .parentElement\n                .dispatchEvent(event);\n            return;\n        }\n\n        this.changePictureAndClear(picture);\n    }\n\n    changePictureAndClear(picture) {\n        const {dragFrom, album} = this.props.dragState;\n\n        const newPictures = [...album.images];\n\n        const dragToPicture = album.images.find(p => p._id == picture._id);\n       // editedPicture.order = prevOrder;\n        const dragFromPicture = album.images.find(p => p._id == dragFrom._id);\n\n        const prevOrder = dragFromPicture.order;\n        dragFromPicture.order = dragToPicture.order;\n        dragToPicture.order = prevOrder;\n\n        newPictures.sort((x, y) => x.order - y.order);\n\n        const newAlbum = Object.assign({}, {\n            ...album,\n            images: newPictures,\n        });\n\n        this.props.updateOrder(newAlbum);\n        this.props.changeDragState({dragStarted: false, dragFrom: null, dragObj: null, dragFromEl: null, album: newAlbum});\n    }\n\n    rotateImage() {\n        http.doPut(routesModule.routes.ROTATE_FOTO, {src: this.props.picture.src})\n            .then(result => {\n                this.props.loadAlbum();\n            });\n    }\n\n    render() {\n        const {picture, openPicture} = this.props;\n        return openPicture\n            ? <div className='drag_container'\n                   imgid={picture._id}>\n                <img className='drag_image'\n                     src={picture.src}\n                     draggable={false}/>\n            </div>\n            : <div className='drag_container'\n                   ref={r => this.dragContainer = r}\n                   imgid={picture._id}\n                   draggable={true}\n                   onMouseDown={e => this.onMouseDown(e, picture)}\n                   onMouseUp={e => this.onMouseUp(e, picture)}\n                   onMouseMove={e => this.onMouseMove(e, picture)}>\n                <img className='drag_image' src={picture.src}/>\n                <CrossIcon className='cross_icon' onClick={() => this.props.deleteItem(picture)}/>\n                <EditIcon className='edit_icon' onClick={() => this.props.openDetails(picture)}/>\n                <div className='text_description' onClick={() => this.props.openDetails(picture)}>{picture.name}</div>\n            </div>\n    }\n}\n\nexport default Card;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/Card.jsx","import React from 'react';\nimport {CrossIcon} from \"../Icons\";\nimport './dialog.less';\n\n\nclass Dialog extends React.Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n\n    render() {\n        return <div className=\"Dialog\">\n                <CrossIcon className=\"cross\" onClick={this.props.onClose}/>\n                <div className=\"Dialog_text\">{this.props.text}</div>\n                <button className=\"Dialog_ok_button\" onClick={this.props.onClick}>ok</button>\n            </div>\n    }\n}\n\nexport default Dialog;\n\n\n\n// WEBPACK FOOTER //\n// ./components/dialog/Dialog.jsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./dialog.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./dialog.less\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./dialog.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/dialog/dialog.less\n// module id = 185\n// module chunks = 0","import React from 'react';\nimport './editCanvas.less';\nimport {CrossIcon, RotateIcon, SaveIcon} from \"../Icons\";\nimport AvatarEditor from \"./ImageRotater\";\nconst routesModule = require('../../constants/routes');\nimport http from '../../HttpService';\n\nclass EditCanvas extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            angle: 0,\n            width: 200,\n            height: 200\n        }\n    }\n\n    getEditedImage() {\n        const {album, image} = this.props;\n        this.avatar.getImage().toBlob(img => {\n            let name = image.split('/');\n            name = name[name.length - 1];\n            const file = new File([img], name);\n\n            http.sendFile(routesModule.routes.UPLOAD_FOTO, file)\n                .then(downloadedFoto => {\n                    http.doPost(routesModule.routes.FOTO_ROUTE, {\n                        src: downloadedFoto.src,\n                        album: album._id\n                    }).then(result => {\n                            const newPictures = [...album.images];\n                            newPictures.push(result);\n                            const newAlbum = Object.assign({}, {\n                                ...album,\n                                images: newPictures,\n                            });\n\n                            this.props.cleanImage({\n                                imageDownloaded: null,\n                                album: newAlbum\n                            });\n                        });\n                });\n        });\n    }\n\n    rotateImage() {\n        const newAngle = this.state.angle + 90;\n        this.calculateParameters(newAngle);\n    }\n\n    calculateParameters(newAngle) {\n        const newState = {\n            height: 200,\n            angle : newAngle\n        };\n        newState.width = newAngle % 180 == 0\n            ? parseInt(this.naturalWidth * this.state.height / this.naturalHeight)\n            : parseInt(this.naturalHeight * this.state.height / this.naturalWidth);\n        this.setState(newState);\n    }\n\n    onLoad(imgInfo) {\n        this.naturalWidth = imgInfo.naturalWidth;\n        this.naturalHeight = imgInfo.naturalHeight;\n\n        this.calculateParameters(this.state.angle);\n    }\n\n    closeImage() {\n        this.props.cleanImage({imageDownloaded: false});\n    }\n\n    render() {\n        const {image} = this.props;\n        const {angle, width, height} = this.state;\n        return <div className=\"Edit_canvas\">\n            <AvatarEditor\n                ref={ae => this.avatar = ae}\n                image={image}\n                rotate={angle}\n                width={width}\n                height={height}\n                onLoadSuccess={(imgInfo) => this.onLoad(imgInfo)}\n            />\n            <RotateIcon className='rotate_icon' onClick={() => this.rotateImage()}/>\n            <SaveIcon className='save_icon' onClick={() => this.getEditedImage()}/>\n            <CrossIcon className='cross_icon' onClick={() => this.closeImage()}/>\n        </div>\n    }\n}\n\nexport default EditCanvas;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/EditCanvas.jsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./editCanvas.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./editCanvas.less\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./editCanvas.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/editAlbum/editCanvas.less\n// module id = 187\n// module chunks = 0","import PropTypes from 'prop-types';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nconst isFileAPISupported = typeof File !== 'undefined'\n\nclass AvatarEditor extends React.Component {\n    static propTypes = {\n        rotate: PropTypes.number,\n        image: PropTypes.oneOfType([\n            PropTypes.string,\n            ...(isFileAPISupported ? [PropTypes.instanceOf(File)] : [])\n        ]),\n        width: PropTypes.number,\n        height: PropTypes.number,\n        style: PropTypes.object,\n        crossOrigin: PropTypes.oneOf(['', 'anonymous', 'use-credentials']),\n\n        onLoadFailure: PropTypes.func,\n        onLoadSuccess: PropTypes.func,\n        onImageReady: PropTypes.func\n    }\n\n    static defaultProps = {\n        rotate: 0,\n        width: 200,\n        height: 200,\n        style: {},\n        onLoadFailure () {},\n        onLoadSuccess () {},\n        onImageReady () {}\n    }\n\n    state = {\n        image: {}\n    }\n\n    isVertical () {\n        return this.props.rotate % 180 !== 0\n    }\n\n    isDataURL (str) {\n        if (str === null) {\n            return false\n        }\n        const regex = /^\\s*data:([a-z]+\\/[a-z]+(;[a-z-]+=[a-z-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\\-._~:@/?%\\s]*\\s*$/i\n        return !!str.match(regex)\n    }\n\n    loadImage (image) {\n        if (isFileAPISupported && image instanceof File) {\n            this.loadImageFile(image)\n        } else if (typeof image === 'string') {\n            this.loadImageURL(image)\n        }\n    }\n\n    loadImageURL (imageURL) {\n        const imageObj = new Image()\n        imageObj.onload = this.handleImageReady.bind(this, imageObj)\n        imageObj.onerror = this.props.onLoadFailure\n        if (!this.isDataURL(imageURL) && this.props.crossOrigin) { imageObj.crossOrigin = this.props.crossOrigin }\n        imageObj.src = imageURL\n    }\n\n    loadImageFile (imageFile) {\n        const reader = new FileReader()\n        reader.onload = e => this.loadImageURL(e.target.result)\n        reader.readAsDataURL(imageFile)\n    }\n\n    componentDidMount () {\n        if (this.props.image) {\n            this.loadImage(this.props.image)\n        }\n    }\n\n    componentDidUpdate () {\n        const canvas = ReactDOM.findDOMNode(this.canvas)\n        const context = canvas.getContext('2d')\n        context.clearRect(0, 0, canvas.width, canvas.height)\n        this.paintImage(context, this.state.image);\n    }\n\n    handleImageReady (image) {\n        this.setState({ image }, this.props.onImageReady)\n        this.props.onLoadSuccess(image)\n    }\n\n    componentWillReceiveProps (newProps) {\n        if (\n            (newProps.image && this.props.image !== newProps.image) ||\n            this.props.width !== newProps.width ||\n            this.props.height !== newProps.height\n        ) {\n            this.loadImage(newProps.image)\n        }\n    }\n\n    paintImage (context, image) {\n        if (image) {\n\n            context.save()\n\n            context.translate(context.canvas.width / 2, context.canvas.height / 2)\n            context.rotate(this.props.rotate * Math.PI / 180)\n            context.translate(\n                -(context.canvas.width / 2),\n                -(context.canvas.height / 2)\n            )\n\n            if (this.isVertical()) {\n                context.translate(\n                    (context.canvas.width - context.canvas.height) / 2,\n                    (context.canvas.height - context.canvas.width) / 2\n                )\n            }\n\n            context.scale(1, 1)\n\n            context.globalCompositeOperation = 'destination-over';\n\n            if(this.isVertical()) {\n                context.drawImage(\n                    image,\n                    0, 0, this.props.height, this.props.width\n                )\n            }\n            context.drawImage(\n                image,\n                0, 0, this.props.width, this.props.height\n            )\n\n            context.restore()\n        }\n    }\n\n    setCanvas = (canvas) => {\n        this.canvas = canvas\n    }\n\n    getImage () {\n        const image = this.state.image;\n\n        // create a canvas with the correct dimensions\n        const canvas = document.createElement('canvas')\n\n        if (this.isVertical()) {\n            canvas.width = image.height;\n            canvas.height = image.width;\n        } else {\n            canvas.width = image.width;\n            canvas.height = image.height\n        }\n\n        // draw the full-size image at the correct position,\n        // the image gets truncated to the size of the canvas.\n        const context = canvas.getContext('2d')\n\n        context.translate(canvas.width / 2, canvas.height / 2)\n        context.rotate(this.props.rotate * Math.PI / 180)\n        context.translate(-(canvas.width / 2), -(canvas.height / 2))\n\n        if (this.isVertical()) {\n            context.translate(\n                (canvas.width - canvas.height) / 2,\n                (canvas.height - canvas.width) / 2\n            )\n        }\n\n        context.drawImage(image, 0, 0)\n\n        return canvas\n    }\n\n    render () {\n        if(!this.state.image) {\n            return null;\n        }\n\n        const defaultStyle = {\n            width: this.props.width,\n            height: this.props.height,\n            cursor: 'grab'\n        }\n\n        const attributes = {\n            width: this.props.width,\n            height: this.props.height,\n            style: {\n                ...defaultStyle,\n                ...this.props.style\n            }\n        }\n\n        return <canvas ref={this.setCanvas} {...attributes} />\n    }\n}\n\nexport default AvatarEditor\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/ImageRotater.jsx","import * as types from '../constants/ActionTypes';\nimport http from '../HttpService';\nconst routesModule = require('../constants/routes');\n\nexport function albumsRequest() {\n    return {\n        type: types.REQ_ALBUMS\n    };\n}\n\nexport function setAlbums(albums) {\n    return {\n        type: types.SET_ALBUMS,\n        albums\n    };\n}\n\nexport function fetchAlbums() {\n    return dispatch => {\n        dispatch(albumsRequest());\n        return http\n            .doGet(routesModule.routes.GET_ALBUMS)\n            .then(result => dispatch(setAlbums(result)));\n    }\n}\n\nexport function fetchAlbumsBySearch(search) {\n    return dispatch => {\n        dispatch(albumsRequest());\n        return http\n            .doGet(routesModule.routes.GET_ALBUMS_SEARCH(search))\n            .then(result => dispatch(setAlbums(result)));\n    }\n}\n\n// export function deleteFotoRequest() {\n//     return {\n//         type: types.REQ_ALBUMS\n//     };\n// }\n\nexport function deleteFotoFromAlbum(id) {\n    return dispatch => {\n        //dispatch(albumsRequest());\n        return http\n            .doDelete(routesModule.routes.DELETE_FOTO(id))\n            //.then(result => dispatch(fetchAlbums()));\n    }\n}\n\nexport function deleteAlbum(id) {\n    return dispatch => {\n        //dispatch(albumsRequest());\n        return http\n            .doDelete(routesModule.routes.DELETE_ALBUM(id))\n            .then(result => dispatch(fetchAlbums()));\n    }\n}\n\nexport function saveFotoDescription(album, image) {\n    return dispatch => {\n        //dispatch(albumsRequest());\n        return http\n            .doPut(routesModule.routes.UPDATE_FOTO(album), image)\n            //.then(result => dispatch(fetchAlbums()));\n    }\n}\n\nexport function saveAlbumDescription(album) {\n    return dispatch => {\n        //dispatch(albumsRequest());\n        return http\n            .doPut(routesModule.routes.ALBUM_ROUTE, album)\n            //.then(result => dispatch(fetchAlbums()));\n    }\n}\n\nexport function saveItemsOrder(album) {\n    return dispatch => {\n        //dispatch(albumsRequest());\n        return http\n            .doPut(routesModule.routes.UPDATE_ITEMS_ORDER, album)\n            //.then(result => dispatch(fetchAlbums()));\n    }\n}\n\nexport function createAlbum(album) {\n    return dispatch => {\n        //dispatch(albumsRequest());\n        return http\n            .doPost(routesModule.routes.ALBUM_ROUTE, album)\n            .then(result => dispatch(fetchAlbums()));\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./actions/albumActions.js","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".edit_container {\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: horizontal;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: row;\\n          flex-direction: row;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n  -ms-flex-wrap: wrap;\\n      flex-wrap: wrap;\\n  padding: 2rem;\\n  position: relative;\\n}\\n.edit_container .drag_container {\\n  position: relative;\\n  left: 0;\\n  top: 0;\\n  width: 300px;\\n  height: 200px;\\n  margin: 0.5rem;\\n  z-index: 0;\\n}\\n.edit_container .drag_container .cross_icon,\\n.edit_container .drag_container .edit_icon {\\n  position: absolute;\\n  fill: white;\\n  width: 1rem;\\n  height: 1rem;\\n  top: 0.2rem;\\n}\\n.edit_container .drag_container .cross_icon {\\n  right: 0.2rem;\\n}\\n.edit_container .drag_container .edit_icon {\\n  right: 1.5rem;\\n}\\n.edit_container .drag_container .text_description {\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  padding: 0 0.3rem;\\n  font-size: 16px;\\n  background-color: rgba(0, 0, 0, 0.4);\\n  color: white;\\n}\\n.edit_container .drag_image {\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n  width: 100%;\\n  height: 100%;\\n}\\n.edit_container .file_input_wrapper {\\n  width: 300px;\\n  height: 200px;\\n  margin: 0.5rem;\\n}\\n.edit_container .edit_album_card {\\n  position: relative;\\n  width: 300px;\\n  height: 200px;\\n  margin: 0.5rem;\\n  color: white;\\n  box-shadow: 0 0 0.3rem 0.1rem white;\\n}\\n.edit_container .edit_album_card .album_image {\\n  width: 100%;\\n  height: 100%;\\n  -o-object-fit: cover;\\n     object-fit: cover;\\n}\\n.edit_container .edit_album_card .album_name {\\n  position: absolute;\\n  bottom: 0.3rem;\\n  left: 0.3rem;\\n  cursor: pointer;\\n  background-color: rgba(0, 0, 0, 0.4);\\n}\\n.edit_container .edit_album_card .cross_icon {\\n  position: absolute;\\n  width: 3rem;\\n  height: 3rem;\\n  fill: white;\\n  top: 0.3rem;\\n  right: 0.3rem;\\n}\\n.edit_container .new_text {\\n  position: absolute;\\n  width: 70%;\\n  height: 50%;\\n}\\n.edit_container .new_text .save_icon,\\n.edit_container .new_text .cross_icon {\\n  position: absolute;\\n  fill: white;\\n  width: 2rem;\\n  height: 2rem;\\n  top: -2.2rem;\\n}\\n.edit_container .new_text .cross_icon {\\n  right: 0;\\n}\\n.edit_container .new_text .save_icon {\\n  right: 3rem;\\n}\\n.edit_container .new_text textarea,\\n.edit_container .new_text input {\\n  background-color: #232326;\\n  border-radius: 0.3rem;\\n  font-size: 1.5rem;\\n  color: white;\\n  padding: 0.5rem;\\n  line-height: 2rem;\\n  border: white solid 1px;\\n  overflow-x: hidden;\\n  resize: none;\\n  width: 100%;\\n}\\n.edit_container .new_text textarea:focus,\\n.edit_container .new_text input:focus {\\n  outline: none;\\n  background-color: #54545b;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/autoprefixer-loader!./node_modules/less-loader/dist/cjs.js!./node_modules/js-to-styles-var-loader!./components/editAlbum/editAlbum.less\n// module id = 43\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".Dialog {\\n  position: absolute;\\n  width: 30rem;\\n  height: 20rem;\\n  background-color: black;\\n  box-shadow: 0 0 0.3rem 0.1rem white;\\n  display: -webkit-box;\\n  display: -ms-flexbox;\\n  display: flex;\\n  -webkit-box-orient: vertical;\\n  -webkit-box-direction: normal;\\n      -ms-flex-direction: column;\\n          flex-direction: column;\\n  -webkit-box-pack: center;\\n      -ms-flex-pack: center;\\n          justify-content: center;\\n  -webkit-box-align: center;\\n      -ms-flex-align: center;\\n          align-items: center;\\n}\\n.Dialog_text {\\n  color: white;\\n  margin: 4rem 2rem 2rem 2rem;\\n}\\n.Dialog .cross {\\n  position: absolute;\\n  width: 2rem;\\n  height: 2rem;\\n  top: 0.2rem;\\n  right: 0.2rem;\\n  fill: white;\\n}\\n.Dialog_ok_button {\\n  width: 10rem;\\n  height: 2rem;\\n  color: white;\\n  background-color: #232326;\\n  font-size: 1rem;\\n  border-width: 3px;\\n  border-radius: 0.3rem;\\n  margin: 2rem;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/autoprefixer-loader!./node_modules/less-loader/dist/cjs.js!./node_modules/js-to-styles-var-loader!./components/dialog/dialog.less\n// module id = 44\n// module chunks = 0","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".Edit_canvas {\\n  position: relative;\\n  height: 200px;\\n  margin: 0.5rem;\\n}\\n.Edit_canvas .cross_icon,\\n.Edit_canvas .rotate_icon,\\n.Edit_canvas .save_icon {\\n  position: absolute;\\n  fill: white;\\n  width: 1rem;\\n  height: 1rem;\\n  top: 0.2rem;\\n}\\n.Edit_canvas .cross_icon {\\n  right: 0.2rem;\\n}\\n.Edit_canvas .save_icon {\\n  right: 2.8rem;\\n}\\n.Edit_canvas .rotate_icon {\\n  right: 1.5rem;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/autoprefixer-loader!./node_modules/less-loader/dist/cjs.js!./node_modules/js-to-styles-var-loader!./components/editAlbum/editCanvas.less\n// module id = 45\n// module chunks = 0","import React from 'react';\nimport {MagnifierIcon} from \"../Icons\";\nimport './fileInput.less';\n\nclass FileInput extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            file: null\n        }\n    }\n\n    onChange({target}) {\n        this.setState({\n            file: target.files[0]\n        })\n        this.props.uploadFile(target.files[0]);\n    }\n\n    render() {\n        return <div className='file_input_wrapper'>\n            <button>{this.props.label}</button>\n            <div className='file_input_area'>\n                <MagnifierIcon/>\n            </div>\n            <input type=\"file\" disabled={this.props.disabled || false}\n                   onChange={(e) => this.onChange(e)}/>\n        </div>\n    }\n}\n\nexport default FileInput;\n\n\n\n// WEBPACK FOOTER //\n// ./components/fileInput/FileInput.jsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./editAlbum.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./editAlbum.less\", function() {\n\t\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/autoprefixer-loader/index.js!../../node_modules/less-loader/dist/cjs.js!../../node_modules/js-to-styles-var-loader/index.js!./editAlbum.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./components/editAlbum/editAlbum.less\n// module id = 80\n// module chunks = 0","import styled from 'styled-components';\nimport LeftArrow from '../svg/left-arrow.svg';\nimport RightArrow from '../svg/right-arrow.svg';\nimport Magnifier from '../svg/magnifier.svg';\nimport Cross from '../svg/cancel.svg';\nimport Edit from '../svg/edit.svg';\nimport Save from '../svg/save-file-option.svg';\nimport Rotate from '../svg/rotate-option.svg';\n\nconst Icon = `\n        width: 1rem;\n        height: 1rem;\n        fill: ${props => props.theme.text};\n        \n        &:hover {\n            cursor: pointer;\n            fill: ${props => props.theme.content};\n        }\n`\n\nexport const LeftArrowIcon = styled(LeftArrow)`\n  ${Icon}\n`\n\nexport const RightArrowIcon = styled(RightArrow)`\n  ${Icon}\n`\n\nexport const MagnifierIcon = styled(Magnifier)`\n   width: 3rem;\n   height: 3rem;\n   fill: rgba(255,255,255, 0.7);\n`\n\nexport const CrossIcon = styled(Cross)`\n   ${Icon}\n`\n\nexport const EditIcon = styled(Edit)`\n   ${Icon}\n`\n\nexport const SaveIcon = styled(Save)`\n   ${Icon}\n`\n\nexport const RotateIcon = styled(Rotate)`\n    ${Icon}\n`\n\n\n// WEBPACK FOOTER //\n// ./components/Icons.jsx"],"sourceRoot":""}