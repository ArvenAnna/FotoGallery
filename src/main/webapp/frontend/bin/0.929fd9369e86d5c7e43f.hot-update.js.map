{"version":3,"sources":["webpack:///./components/editAlbum/EditAlbum.jsx","webpack:///./components/editAlbum/Card.jsx"],"names":["routesModule","require","EditAlbum","connect","store","deleteFotoFromAlbum","saveFotoDescription","saveAlbumDescription","deleteAlbum","saveItemsOrder","React","Component","constructor","props","state","dragStarted","dragFrom","dragFromEl","dragObj","openPicture","openedAlbum","album","openedDialog","imageDownloaded","imageLoading","imageLoadStarted","albumLoading","componentDidMount","loadAlbum","setState","http","doGet","routes","GET_ALBUM","match","params","id","then","result","images","sort","x","y","order","forEach","image","src","Date","toISOString","catch","e","Alert","error","response","data","openDetails","picture","openAlbumDetails","onCrossClick","deleteItem","length","_id","newPictures","filter","p","newAlbum","Object","assign","removeAlbum","history","push","changeState","obj","editedPicture","find","pinput","value","name","ptextarea","text","editedAlbum","ainput","atextarea","description","uploadFile","file","sendFile","UPLOAD_FOTO","downloadedFoto","isVideo","doPost","FOTO_ROUTE","onImageLoad","onImageError","loadImage","imageObj","Image","onload","bind","onerror","renderEditAlbumCard","renderImages","map","target","replaceImage","renderFileInput","renderEditCanvas","renderChangeFotoTextInfoDialog","i","t","renderChangeAlbumTextInfoDialog","renderDeleteDialog","render","Card","replaceEvent","componentWillReceiveProps","dragContainer","replaceAttached","addEventListener","document","body","onUpBody","elementAtPoint","elementFromPoint","clientX","window","scrollX","clientY","scrollY","parentElement","classList","contains","changeDragState","attr","getAttribute","pictures","changePictureAndClear","onMouseDown","preventDefault","style","currentStyle","getComputedStyle","elStartLeft","parseInt","left","elStartTop","top","zIndex","onMouseMove","dragState","onMouseUp","event","Event","dispatchEvent","dragToPicture","dragFromPicture","prevOrder","updateOrder","r"],"mappings":"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","file":"0.929fd9369e86d5c7e43f.hot-update.js","sourcesContent":["import React from 'react';\nimport './editAlbum.less';\nimport FileInput from \"../fileInput/FileInput\";\nimport {CrossIcon, SaveIcon} from \"../Icons\";\nimport Card from \"./Card\";\nimport http from '../../HttpService';\nimport connect from \"react-redux/es/connect/connect\";\nimport {\n    deleteAlbum, deleteFotoFromAlbum, saveAlbumDescription,\n    saveFotoDescription, saveItemsOrder\n} from \"../../actions/albumActions\";\nimport Dialog from \"../dialog/Dialog\";\nimport EditCanvas from \"./EditCanvas\";\nimport {isVideo} from \"../../utils/index\";\nimport * as styles from \"../../constants/styles\";\nconst routesModule = require('../../constants/routes');\nimport Loader from 'react-loaders';\nimport 'loaders.css/src/animations/ball-scale-multiple.scss';\nimport 'loaders.css/src/animations/ball-grid-pulse.scss';\nimport Alert from 'react-s-alert';\n\n\n@connect(store => ({}), {\n    deleteFotoFromAlbum,\n    saveFotoDescription,\n    saveAlbumDescription,\n    deleteAlbum,\n    saveItemsOrder\n})\nclass EditAlbum extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            dragStarted: false,\n            dragFrom: null,\n            dragFromEl: null,\n            dragObj: null,\n            openPicture: null,\n            openedAlbum: false,\n            album: null,\n            openedDialog: false,\n            imageDownloaded: false,\n            imageLoading: true,\n            imageLoadStarted: false,\n            albumLoading: false\n        }\n    }\n\n    componentDidMount() {\n        this.loadAlbum();\n    }\n\n    loadAlbum() {\n        this.setState({albumLoading: true});\n        http.doGet(routesModule.routes.GET_ALBUM(this.props.match.params.id))\n            .then(result => {\n                result.images.sort((x, y) => x.order - y.order);\n                result.images.forEach(image => image.src = image.src + '?forceUpdate=' + new Date().toISOString())\n                this.setState({album: result, albumLoading: false});\n            })\n            .catch(e => Alert.error(e.response.data.error, {}));\n    }\n\n    openDetails(picture) {\n        this.setState({openPicture: picture});\n    }\n\n    openAlbumDetails() {\n        this.setState({openedAlbum: true});\n    }\n\n    onCrossClick() {\n        this.setState({openPicture: null, openedAlbum: false});\n    }\n\n    deleteItem(picture) {\n        if (this.state.album.images.length == 1) {\n            this.setState({openedDialog: true});\n            return;\n        }\n\n        this.props.deleteFotoFromAlbum(picture._id);\n        const newPictures = this.state.album.images.filter(p => p._id != picture._id);\n        const newAlbum = Object.assign({}, {\n            ...this.state.album,\n            images: newPictures,\n        })\n        this.setState({album: newAlbum});\n    }\n\n    removeAlbum() {\n        this.props.deleteAlbum(this.state.album._id);\n        this.props.history.push('/');\n    }\n\n    changeState(obj) {\n        this.setState(obj);\n    }\n\n    saveFotoDescription(picture) {\n        const newPictures = [...this.state.album.images];\n        const editedPicture = this.state.album.images.find(p => p._id == picture._id);\n        if (this.pinput.value) editedPicture.name = this.pinput.value;\n        if (this.ptextarea.value) editedPicture.text = this.ptextarea.value;\n\n        this.props.saveFotoDescription(this.state.album._id, editedPicture);\n\n        const newAlbum = Object.assign({}, {\n            ...this.state.album,\n            images: newPictures,\n        });\n        this.setState({album: newAlbum, openPicture: null});\n    }\n\n    saveAlbumDescription() {\n        const editedAlbum = Object.assign({}, {...this.state.album});\n        if (this.ainput.value) editedAlbum.name = this.ainput.value;\n        if (this.atextarea.value) editedAlbum.description = this.atextarea.value;\n\n        this.props.saveAlbumDescription(editedAlbum);\n\n        this.setState({album: editedAlbum, openedAlbum: false});\n    }\n\n    uploadFile(file) {\n        http.sendFile(routesModule.routes.UPLOAD_FOTO, file)\n            .then(downloadedFoto => {\n                if (isVideo(downloadedFoto.src)) {\n                    http.doPost(routesModule.routes.FOTO_ROUTE, {\n                        src: downloadedFoto.src,\n                        album: this.state.album._id\n                    }).then(result => {\n                        const newPictures = [...this.state.album.images];\n                        newPictures.push(result);\n                        const newAlbum = Object.assign({}, {\n                            ...this.state.album,\n                            images: newPictures,\n                        });\n\n                        this.setState({\n                            //imageDownloaded: null,\n                            album: newAlbum\n                        });\n                    }).catch(e => Alert.error(e.response.data.error, {}));\n                } else {\n                    this.setState({\n                        imageDownloaded: downloadedFoto.src\n                    });\n                }\n\n            })\n            .catch(e => Alert.error(e.response.data.error, {}));\n    }\n\n    onImageLoad() {\n        this.setState({imageLoading: false, });\n    }\n\n    onImageError() {\n        Alert.error(\"Image for name {\" + this.state.album.images[0].name + \"} loading failed\", {});\n        this.setState({imageLoading: false});\n    }\n\n    loadImage(src) {\n        this.setState({imageLoadStarted: true});\n        const imageObj = new Image()\n        imageObj.onload = this.onImageLoad.bind(this);\n        imageObj.onerror = this.onImageError.bind(this);\n        imageObj.src = src;\n    }\n\n    renderEditAlbumCard() {\n        if(!this.state.imageLoadStarted) this.loadImage(this.state.album.images[0].src);\n        return <div className='edit_album_card' key=\"edit_album_card\">\n            {this.state.imageLoading ? <Loader type=\"ball-scale-multiple\"/> : isVideo(this.state.album.images[0].src)\n                ? <video className=\"album_image\"\n                         height={styles.picture_edit_height}\n                         width={styles.picture_edit_width}\n                         controls=\"controls\">\n                    <source src={this.state.album.images[0].src}/>\n                </video>\n                : <img className='album_image'\n                       src={this.state.album.images[0].src}/>}\n            <div className='album_name' onClick={() => this.openAlbumDetails()}>{this.state.album.name}</div>\n            <CrossIcon className='cross_icon' onClick={() => this.setState({openedDialog: true})}/>\n        </div>\n    }\n\n    renderImages() {\n        return this.state.album.images.sort((x, y) => x.order - y.order).map(p => <Card\n            key={p._id}\n            picture={p}\n            pictures={this.state.album.images}\n            openDetails={(p) => this.openDetails(p)}\n            deleteItem={(p) => this.deleteItem(p)}\n            replaceImage={(target) => this.replaceImage(target)}\n            openPicture={this.state.openPicture}\n            changeDragState={(obj) => this.changeState(obj)}\n            dragState={this.state}\n            updateOrder={(album) => this.props.saveItemsOrder(album)}\n            loadAlbum={() => this.loadAlbum()}\n        />)\n    }\n\n    renderFileInput() {\n        return !this.state.imageDownloaded && <FileInput className='edit_file_input'\n                                                         disabled={this.state.openPicture}\n                                                         label='Choose new foto'\n                                                         uploadFile={(file) => this.uploadFile(file)}\n            />\n    }\n\n    renderEditCanvas() {\n        return this.state.imageDownloaded && !isVideo(this.state.imageDownloaded) && <EditCanvas\n                image={this.state.imageDownloaded}\n                cleanImage={obj => this.changeState(obj)}\n                album={this.state.album}\n            />\n    }\n\n    renderChangeFotoTextInfoDialog() {\n        return this.state.openPicture &&\n            <div className='new_text_overlay'>\n                <div className='new_text'>\n                    <div className=\"new_text_caption\">Enter foto name and description:</div>\n                    <SaveIcon className='save_icon' onClick={() => this.saveFotoDescription(this.state.openPicture)}/>\n                    <CrossIcon className='cross_icon' onClick={() => this.onCrossClick()}/>\n                    <input defaultValue={this.state.openPicture.name} ref={i => this.pinput = i}/>\n                    <textarea defaultValue={this.state.openPicture.text} ref={t => this.ptextarea = t}/>\n                </div>\n            </div>\n    }\n\n    renderChangeAlbumTextInfoDialog() {\n        return this.state.openedAlbum &&\n            <div className='new_text_overlay'>\n                <div className='new_text'>\n                    <div className=\"new_text_caption\">Enter album name and description:</div>\n                    <SaveIcon className='save_icon' onClick={() => this.saveAlbumDescription()}/>\n                    <CrossIcon className='cross_icon' onClick={() => this.onCrossClick()}/>\n                    <input defaultValue={this.state.album.name} ref={i => this.ainput = i}/>\n                    <textarea defaultValue={this.state.album.description} ref={t => this.atextarea = t}/>\n                </div>\n            </div>\n    }\n\n    renderDeleteDialog() {\n        return this.state.openedDialog && <Dialog onClick={() => this.removeAlbum()}\n                                                  onClose={() => this.setState({openedDialog: false})}\n                                                  text=\"Do you really want to delete the album?\"/>\n    }\n\n\n    render() {\n        const {album, albumLoading} = this.state;\n        if(albumLoading) return <Loader type=\"ball-grid-pulse\" className='Data_loader'/>;\n        if (!album) return null;\n\n        return <React.Fragment>\n            {this.renderEditAlbumCard()}\n            {this.renderImages()}\n            {this.renderFileInput()}\n            {this.renderEditCanvas()}\n            {this.renderChangeFotoTextInfoDialog()}\n            {this.renderChangeAlbumTextInfoDialog()}\n            {this.renderDeleteDialog()}\n        </React.Fragment>;\n    }\n}\n\nexport default EditAlbum;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/EditAlbum.jsx","import React from 'react';\nimport './editAlbum.less';\nimport {CrossIcon, EditIcon} from \"../Icons\";\nimport {isVideo} from \"../../utils/index\";\nimport Loader from 'react-loaders';\nimport 'loaders.css/src/animations/ball-scale-multiple.scss';\nimport * as styles from \"../../constants/styles\";\nimport Alert from 'react-s-alert';\n\nclass Card extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.replaceEvent = 'replace';\n        this.state = {\n            imageLoading: true,\n            imageLoadStarted: false\n        }\n    }\n\n\n    componentWillReceiveProps() {\n        if (this.dragContainer && !this.replaceAttached) {\n            this.replaceAttached = true;\n            this.dragContainer.addEventListener(this.replaceEvent, e => this.replaceImage(e.target));\n            document.body.addEventListener('mouseup', e => this.onUpBody(e));\n        }\n    }\n\n    onUpBody(e) {\n        const elementAtPoint = document.elementFromPoint(e.clientX + window.scrollX, e.clientY + window.scrollY)\n            .parentElement;\n        if (!elementAtPoint.classList.contains('drag_container')) {\n            this.props.changeDragState({dragStarted: false, dragFrom: null, dragObj: null, dragFromEl: null});\n        }\n    }\n\n    replaceImage(target) {\n        const attr = target.getAttribute('imgid');\n        const picture = this.props.pictures.find(p => p._id == attr);\n\n        this.changePictureAndClear(picture);\n    }\n\n    onMouseDown(e, picture) {\n        e.preventDefault();\n\n        const target = e.target.parentElement;\n\n        const x = e.clientX + window.scrollX;\n        const y = e.clientY + window.scrollY;\n\n        const style = target.currentStyle || window.getComputedStyle(target);\n\n        const elStartLeft = parseInt(style.left, 10);\n        const elStartTop = parseInt(style.top, 10);\n        const dragObj = {\n            x, y, elStartLeft, elStartTop\n        }\n        target.style.zIndex = 10;\n        this.props.changeDragState({dragStarted: true, dragFrom: picture, dragObj, dragFromEl: target});\n        target.style.zIndex = 10;\n    }\n\n    onMouseMove(e, picture) {\n        e.preventDefault();\n        const {dragFrom, dragStarted, dragObj} = this.props.dragState;\n        const target = e.target.parentElement;\n        if (dragStarted && dragFrom == picture) {\n            const x = e.clientX + window.scrollX;\n            const y = e.clientY + window.scrollY;\n            target.style.top = (dragObj.elStartTop + y - dragObj.y) + 'px';\n            target.style.left = (dragObj.elStartLeft + x - dragObj.x) + 'px';\n        }\n    }\n\n    onMouseUp(e, picture) {\n        e.preventDefault();\n\n        const {dragFrom, dragFromEl} = this.props.dragState;\n        const target = e.target.parentElement;\n\n        if(!dragFromEl) {\n            return;\n        }\n\n        dragFromEl.style.top = '0px';\n        dragFromEl.style.left = '0px';\n\n        target.style.top = '0px';\n        target.style.left = '0px';\n\n        dragFromEl.style.zIndex = 0;\n\n        if (picture == dragFrom) {\n            const event = new Event(this.replaceEvent);\n            const elementAtPoint = document.elementFromPoint(e.clientX + window.scrollX, e.clientY + window.scrollY)\n                .parentElement;\n            if (elementAtPoint.classList.contains('drag_container')) {\n                elementAtPoint.dispatchEvent(event);\n            } else {\n                this.props.changeDragState({dragStarted: false, dragFrom: null, dragObj: null, dragFromEl: null});\n            }\n\n            return;\n        }\n\n        this.changePictureAndClear(picture);\n    }\n\n    changePictureAndClear(picture) {\n        const {dragFrom, album} = this.props.dragState;\n\n        const newPictures = [...album.images];\n\n        const dragToPicture = album.images.find(p => p._id == picture._id);\n       // editedPicture.order = prevOrder;\n        const dragFromPicture = album.images.find(p => p._id == dragFrom._id);\n\n        const prevOrder = dragFromPicture.order;\n        dragFromPicture.order = dragToPicture.order;\n        dragToPicture.order = prevOrder;\n\n        newPictures.sort((x, y) => x.order - y.order);\n\n        const newAlbum = Object.assign({}, {\n            ...album,\n            images: newPictures,\n        });\n\n        this.props.updateOrder(newAlbum);\n        this.props.changeDragState({dragStarted: false, dragFrom: null, dragObj: null, dragFromEl: null, album: newAlbum});\n    }\n\n    onImageLoad() {\n        this.setState({imageLoading: false});\n    }\n\n    onImageError() {\n        Alert.error(\"Image for name {\" + this.props.picture.name + \"} loading failed\", {});\n        this.setState({imageLoading: false});\n    }\n\n    loadImage(src) {\n        this.setState({imageLoadStarted: true});\n        const imageObj = new Image();\n        imageObj.onload = this.onImageLoad.bind(this);\n        imageObj.onerror = this.onImageError.bind(this);\n        imageObj.src = src;\n    }\n\n    render() {\n        const {picture, openPicture} = this.props;\n        const {imageLoading, imageLoadStarted} = this.state;\n        if (!imageLoadStarted && picture) this.loadImage(picture.src);\n        return openPicture\n            ? <div className='drag_container'\n                   imgid={picture._id}>\n                <img className='drag_image'\n                     src={picture.src}\n                     draggable={false}/>\n            </div>\n            : <div className='drag_container'\n                   ref={r => this.dragContainer = r}\n                   imgid={picture._id}\n                   draggable={true}\n                   onMouseDown={e => this.onMouseDown(e, picture)}\n                   onMouseUp={e => this.onMouseUp(e, picture)}\n                   onMouseMove={e => this.onMouseMove(e, picture)}>\n                {imageLoading ? <Loader type=\"ball-scale-multiple\"/> : isVideo(picture.src)\n                    ? <video height={styles.picture_edit_height}\n                             controls=\"controls\"\n                             className='drag_image'>\n                    <source src={picture.src}/>\n                </video>\n                    : <img className='drag_image' src={picture.src}/>}\n                <CrossIcon className='cross_icon' onClick={() => this.props.deleteItem(picture)}/>\n                <EditIcon className='edit_icon' onClick={() => this.props.openDetails(picture)}/>\n                <div className='text_description' onClick={() => this.props.openDetails(picture)}>{picture.name}</div>\n            </div>\n    }\n}\n\nexport default Card;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/Card.jsx"],"sourceRoot":""}