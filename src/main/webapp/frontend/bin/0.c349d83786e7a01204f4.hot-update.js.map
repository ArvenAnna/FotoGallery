{"version":3,"sources":["webpack:///./components/scroll/Scroll.jsx"],"names":["Scroll","React","Component","constructor","props","track","cont","text","scroll","speed","state","currentScrollY","dragStarted","componentDidMount","style","height","width","calculateScrollHeight","document","body","setAttribute","contRect","getBoundingClientRect","textRect","Math","round","parseInt","onWheel","e","scrollTo","deltaY","onDrag","console","log","clientY","getScrollDelta","setState","getScrollDirectionAsNumber","scrollStyle","currentStyle","window","getComputedStyle","trackStyle","scrollTop","top","scrollGap","nextScrollTop","textStyle","contStyle","nextTextTop","minTextScroll","onStart","preventDefault","gg","render","FirstChild","childrenArray","Children","toArray","children","node"],"mappings":"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","file":"0.c349d83786e7a01204f4.hot-update.js","sourcesContent":["import React from 'react';\nimport './scroll.less';\n\nclass Scroll extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.track = null;\n        this.cont = null;\n        this.text = null;\n        this.scroll = null;\n\n        this.speed = this.props.speed || 2;\n        this.state = {\n            currentScrollY: 0,\n            dragStarted: false\n        }\n    }\n\n    componentDidMount() {\n        this.cont.style.height = this.props.height;\n        this.cont.style.width = this.props.width;\n        this.track.style.height = this.props.height;\n\n        this.scroll.style.height = this.calculateScrollHeight();\n        document.body.setAttribute('draggable', 'false');\n    }\n\n    calculateScrollHeight() {\n        const contRect = this.cont.getBoundingClientRect();\n        const textRect = this.text.getBoundingClientRect();\n\n        return Math.round(parseInt(contRect.height) * parseInt(contRect.height) / parseInt(textRect.height));\n    }\n\n    onWheel(e) {\n        this.scrollTo(() => e.deltaY > 0 ? 1 : (e.deltaY < 0 ? -1 : 0));\n    }\n\n    onDrag(e) {\n        if(!this.state.dragStarted) {\n            return;\n        }\n\n        console.log(e.clientY);\n\n        this.scrollTo(() => this.getScrollDelta(e));\n        this.setState({\n            currentScrollY: e.clientY\n        });\n        //return false;\n    }\n\n    scrollTo(getScrollDirectionAsNumber) {\n        const scrollStyle = this.scroll.currentStyle || window.getComputedStyle(this.scroll);\n        const trackStyle = this.track.currentStyle || window.getComputedStyle(this.track);\n\n        const scrollTop = parseInt(scrollStyle.top);\n        const scrollGap = (parseInt(trackStyle.height) - parseInt(scrollStyle.height));\n\n        if ((scrollTop <= 0 && getScrollDirectionAsNumber() < 0)\n            || (scrollTop > scrollGap - 1 && getScrollDirectionAsNumber() > 0)\n            || getScrollDirectionAsNumber() == 0) {\n            return;\n        }\n\n        const nextScrollTop = scrollTop + getScrollDirectionAsNumber() * this.speed;\n\n        this.scroll.style.top = nextScrollTop + 'px';\n\n        const textStyle = this.text.currentStyle || window.getComputedStyle(this.text);\n        const contStyle = this.cont.currentStyle || window.getComputedStyle(this.cont);\n        const nextTextTop = Math.round(- nextScrollTop * (parseInt(trackStyle.height) / parseInt(scrollStyle.height)));\n\n        const minTextScroll = -(parseInt(textStyle.height) - parseInt(contStyle.height));\n\n        if (nextTextTop > 0) {\n            this.text.style.top = 0 + 'px';\n        } else if (nextTextTop < minTextScroll) {\n            this.text.style.top = minTextScroll + 'px';\n        } else {\n            this.text.style.top = nextTextTop + 'px';\n        }\n    }\n\n    getScrollDelta(e) {\n        if (e.clientY > this.state.currentScrollY) {\n            return 1;\n        }\n        if (e.clientY < this.state.currentScrollY) {\n            return -1;\n        }\n        return 0;\n    }\n\n    onStart(e) {\n      e.preventDefault();\n      return false;\n    }\n\n    gg(e) {\n      e.preventDefault();\n      this.setState({dragStarted: true});\n    }\n\n\n\n    render() {\n      console.log(this.state.dragStarted);\n        const FirstChild = () => {\n            const childrenArray = React.Children.toArray(this.props.children);\n            return childrenArray[0] || null;\n        }\n        return (\n                <div className='text_container'\n                     ref={node => this.cont = node}\n                     draggable='false'\n                     onWheel={(e) => this.onWheel(e)}\n                     onMouseLeave={() => this.setState({dragStarted: false})}\n                     onMouseMove={(e) => this.onDrag(e)}\n                     onMouseDown={() => this.gg(e)}\n                     onMouseUp={() => this.setState({dragStarted: false})}\n                >\n                    <div className='text'\n                         draggable='false'\n                         ref={node => this.text = node}>\n                        <FirstChild/>\n                    </div>\n\n                    <div className='scroll_track'\n                         ref={node => this.track = node}>\n                        <div className='scroll'\n                             ref={node => this.scroll = node}\n                          //onDragStart={(e) => this.onStart(e)}\n                        />\n                    </div>\n                </div>\n        );\n    }\n}\n\nexport default Scroll;\n\n\n\n// WEBPACK FOOTER //\n// ./components/scroll/Scroll.jsx"],"sourceRoot":""}