{"version":3,"sources":["webpack:///./components/picture/PreviewImageFrame.jsx","webpack:///./constants/routes.js"],"names":["PreviewImageFrame","connect","store","albums","fetchAlbums","React","Component","constructor","props","img","current","images","find","src","currentIndex","indexOf","state","imageWidth","main","left","right","length","componentDidMount","setImageWidth","getImageContainerWidth","window","addEventListener","changeImageWidth","componentWillUnmount","removeEventListener","imageRect","getBoundingClientRect","width","componentDidUpdate","prevProps","prevState","setTimeout","onCrossClick","close","onArrowClick","arrow","setState","clearAnimate","render","editRoute","node","apiPrefix","routes","GET_ALBUMS","GET_ALBUMS_SEARCH","search","ALBUM_ROUTE","GET_ALBUM","id","DELETE_ALBUM","UPDATE_ITEMS_ORDER","FOTO_ROUTE","DELETE_FOTO","album","UPDATE_FOTO","UPLOAD_FOTO","exports"],"mappings":"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","file":"0.896bf43d86e0f5bf84d1.hot-update.js","sourcesContent":["import React from \"react\";\nimport {CrossIcon, EditIcon, LeftArrowIcon, RightArrowIcon} from \"../Icons\";\nimport \"./preview.less\";\nimport {Link} from \"react-router-dom\";\nimport connect from \"react-redux/es/connect/connect\";\n\n@connect(store => ({\n    albums: store.albums\n}), {\n    fetchAlbums\n})\nclass PreviewImageFrame extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.img = null;\n\n    const current = props.images.find(img => img === props.src);\n    const currentIndex = props.images.indexOf(current);\n\n    this.state = {\n      imageWidth: 0,\n      main: props.main,\n      left: currentIndex > 0,\n      right: currentIndex < (props.images.length - 1)\n    };\n  }\n\n  componentDidMount() {\n    this.props.setImageWidth(this.getImageContainerWidth());\n    window.addEventListener('resize', () => this.changeImageWidth());\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', () => this.changeImageWidth());\n  }\n\n  getImageContainerWidth() {\n    const img = this.img;\n    if (!img) return 0;\n    const imageRect = img.getBoundingClientRect();\n    return imageRect.width;\n  }\n\n  changeImageWidth() {\n    this.props.setImageWidth(this.getImageContainerWidth());\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.main != this.state.main) {\n      // in order to make sure width will be recalculated\n      window.setTimeout(() => this.changeImageWidth(), 100);\n    }\n  }\n\n  onCrossClick() {\n    this.props.close();\n  }\n\n  onArrowClick(arrow) {\n    const {images} = this.props;\n    //const current = images.find(img => img === this.state.main);\n    const currentIndex = images.indexOf(this.state.main);\n    let main;\n\n    if (arrow === 'left' && currentIndex > 0) {\n      main = images[currentIndex - 1];\n      this.setState({\n        main,\n        left: (currentIndex - 1) > 0,\n        right: (currentIndex - 1) < (images.length - 1)\n      });\n    }\n\n    if (arrow === 'right' && currentIndex < (images.length - 1)) {\n        main = images[currentIndex + 1];\n        this.setState({\n        main,\n        left: (currentIndex + 1) > 0,\n        right: (currentIndex + 1) < (images.length - 1)\n      })\n    }\n\n    this.props.clearAnimate(main);\n  }\n\n  render() {\n    const {main, left, right} = this.state;\n    const {images, editRoute} = this.props;\n\n    return (<div className='magnify_modal_img_frame_container'>\n        <CrossIcon className='cross' onClick={() => this.onCrossClick()}/>\n            {editRoute && <Link to={this.props.editRoute}><EditIcon className='edit'/></Link>}\n        {left && <div className='left_arrow'>\n          <LeftArrowIcon onClick={() => this.onArrowClick('left')}/>\n        </div>}\n        {right && <div className='right_arrow'>\n          <RightArrowIcon onClick={() => this.onArrowClick('right')}/>\n        </div>}\n        <div className='counter_container'>\n          <div className='counter'>{`${(images.indexOf(main) + 1)} of ${images.length}`}</div>\n        </div>\n        <img src={main.src} className='image_preview' ref={node => this.img = node}/>\n      </div>\n    );\n  }\n}\n\nexport default PreviewImageFrame;\n\n\n// WEBPACK FOOTER //\n// ./components/picture/PreviewImageFrame.jsx","const apiPrefix = '/api/';\n\nconst routes = {\n    GET_ALBUMS: `${apiPrefix}albums`,\n    GET_ALBUMS_SEARCH: (search) => `${apiPrefix}albums?search=${search}`,\n\n    ALBUM_ROUTE: `${apiPrefix}album`,\n    GET_ALBUM: (id) => `${apiPrefix}album?id=${id}`,\n    DELETE_ALBUM : (id) => `${apiPrefix}album?id=${id}`,\n    UPDATE_ITEMS_ORDER: `${apiPrefix}album/items`,\n\n    FOTO_ROUTE: `${apiPrefix}foto`,\n    DELETE_FOTO: (id, album) => `${apiPrefix}foto?album=${album}&id=${id}`,\n    UPDATE_FOTO: (album) => `${apiPrefix}foto?album=${album}`,\n\n    UPLOAD_FOTO: `${apiPrefix}upload`\n\n};\n\nexports.routes = routes;\n\n\n\n\n// WEBPACK FOOTER //\n// ./constants/routes.js"],"sourceRoot":""}