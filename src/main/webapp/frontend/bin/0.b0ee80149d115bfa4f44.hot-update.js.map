{"version":3,"sources":["webpack:///./components/AlbumContainer.jsx","webpack:///./actions/albumActions.js","webpack:///./HttpService.js","webpack:///./constants/routes.js","webpack:///./components/editAlbum/EditAlbum.jsx"],"names":["Container","styled","div","AlbumContainer","connect","store","albums","fetchAlbums","React","Component","constructor","props","render","map","album","images","id","routesModule","require","albumsRequest","type","REQ_ALBUMS","setAlbums","dispatch","http","doGet","routes","GET_ALBUMS","then","result","deleteFotoFromAlbum","doDelete","DELETE_FOTO","saveFotoDescription","image","doPut","UPDATE_FOTO","HttpService","axios","create","headers","responseType","route","transformResponse","get","data","delete","doPost","request","post","JSON","stringify","put","sendFile","file","fd","FormData","append","undefined","apiPrefix","ALBUM_ROUTE","GET_ALBUM","FOTO_PATH","exports","EditAlbum","state","dragStarted","dragFrom","dragFromEl","dragObj","openPicture","componentDidMount","match","params","setState","openDetails","picture","onCrossClick","deleteItem","newPictures","filter","p","newAlbum","Object","assign","changeDragState","obj","editedPicture","find","input","value","name","text","sort","x","y","order","target","replaceImage","t","i","textarea"],"mappings":"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","file":"0.b0ee80149d115bfa4f44.hot-update.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport Picture from \"./picture/Picture\";\nimport connect from \"react-redux/es/connect/connect\";\nimport {fetchAlbums} from \"../actions/albumActions\";\n\n// overrides picture styles\nconst Container = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  flex-wrap: wrap;\n  padding: 2rem;\n\n  &>div {\n     padding: 1rem;\n        \n     .image {\n        height: 15rem;\n        width: 20rem;\n        object-fit: cover;\n      }\n\n      .image_wrapper .overlay .overlay_bottom_text {\n         font-size: 1rem;\n      }\n  }\n`\n@connect(store => ({\n    albums: store.albums\n}), {\n    fetchAlbums\n})\nclass AlbumContainer extends React.Component {\n    constructor(props) {\n        super(props);\n        this.props.fetchAlbums();\n    }\n\n    render() {\n        return (\n            <Container>\n                {this.props.albums.map(album => <Picture main={album.images[0]}\n                                                         key={album.id}\n                                                         animation='fade'\n                                                         editRoute={`/edit/${album.id}`}\n                                                         images={album.images}/>)}\n\n            </Container>\n        );\n    }\n}\n\nexport default AlbumContainer;\n\n\n// WEBPACK FOOTER //\n// ./components/AlbumContainer.jsx","import * as types from '../constants/ActionTypes';\nimport http from '../HttpService';\nconst routesModule = require('../constants/routes');\n\nexport function albumsRequest() {\n    return {\n        type: types.REQ_ALBUMS\n    };\n}\n\nexport function setAlbums(albums) {\n    return {\n        type: types.SET_ALBUMS,\n        albums\n    };\n}\n\nexport function fetchAlbums() {\n    return dispatch => {\n        dispatch(albumsRequest());\n        return http\n            .doGet(routesModule.routes.GET_ALBUMS)\n            .then(result => dispatch(setAlbums(result)));\n    }\n}\n\n// export function deleteFotoRequest() {\n//     return {\n//         type: types.REQ_ALBUMS\n//     };\n// }\n\nexport function deleteFotoFromAlbum(id, album) {\n    return dispatch => {\n        //dispatch(albumsRequest());\n        return http\n            .doDelete(routesModule.routes.DELETE_FOTO(id, album))\n            .then(result => dispatch(fetchAlbums()));\n    }\n}\n\nexport function saveFotoDescription(album, image) {\n    return dispatch => {\n        //dispatch(albumsRequest());\n        return http\n            .doPut(routesModule.routes.UPDATE_FOTO(album), image)\n            .then(result => dispatch(fetchAlbums()));\n    }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./actions/albumActions.js","import axios from 'axios';\n\nclass HttpService {\n    constructor() {\n        this.http = axios.create({\n            headers: {\"Content-Type\": \"application/json\"},\n            responseType: 'json'\n        });\n    }\n\n    doGet(route, transformResponse) {\n        return this.http\n            .get(route)\n            .then(result => {\n                if (transformResponse) {\n                    return transformResponse(result.data)\n                }\n                return result.data\n            });\n    }\n\n    doDelete(route, transformResponse) {\n        return this.http\n            .delete(route)\n            .then(result => {\n                if (transformResponse) {\n                    return transformResponse(result.data)\n                }\n                return result.data\n            });\n    }\n\n    doPost(route, request) {\n        return this.http\n            .post(route, JSON.stringify(request))\n            .then(result => result.data);\n    }\n\n    doPut(route, request) {\n        return this.http\n            .put(route, JSON.stringify(request))\n            .then(result => result.data);\n    }\n\n    sendFile(route, file) {\n        let fd = new FormData();\n        fd.append('file', file);\n        //fd.append('receptId', receptId);\n        return this.http\n            .post(route, fd, {\n                headers: {'Content-Type': undefined}\n            })\n            .then(result => result.data);\n    }\n}\n\nexport default new HttpService();\n\n\n// WEBPACK FOOTER //\n// ./HttpService.js","const apiPrefix = '/api/';\n\nconst routes = {\n    GET_ALBUMS: `${apiPrefix}albums`,\n\n    ALBUM_ROUTE: `${apiPrefix}album`,\n    GET_ALBUM: (id) => `${apiPrefix}album?id=${id}`,\n\n    DELETE_FOTO: (id, album) => `${apiPrefix}foto?album=${album}&id=${id}`,\n    UPDATE_FOTO: (album) => `${apiPrefix}foto?album=${album}`,\n    FOTO_PATH: `${apiPrefix}foto`,\n\n\n\n    // GET_RECEPTS: (departId) => `/recept_list.req?departId=${departId}`,\n    // GET_RECEPT: (receptId) => `/recept.req?receptId=${receptId}`,\n    // GET_INGRIDIENTS: '/ing_list.req',\n    // GET_TAGS: '/tags.req',\n    //\n    // POST_INGRIDIENTS: '/ingridient.req',\n    // POST_CREATE_RECEPT: '/recept.req',\n    //\n    // UPLOAD_FILE: '/file.req',\n    //\n    // IMAGE_CATALOG: '/foto/'\n};\n\nexports.routes = routes;\n\n\n\n\n// WEBPACK FOOTER //\n// ./constants/routes.js","import React from 'react';\nimport './editAlbum.less';\nimport FileInput from \"../fileInput/FileInput\";\nimport {CrossIcon, SaveIcon} from \"../Icons\";\nimport Card from \"./Card\";\nimport http from '../../HttpService';\nimport connect from \"react-redux/es/connect/connect\";\nimport {deleteFotoFromAlbum, saveFotoDescription} from \"../../actions/albumActions\";\nconst routesModule = require('../../constants/routes');\n\n@connect(store => ({\n\n}), {\n    deleteFotoFromAlbum,\n    saveFotoDescription\n})\nclass EditAlbum extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            dragStarted: false,\n            dragFrom: null,\n            dragFromEl: null,\n            dragObj: null,\n            openPicture: null,\n            album: null\n        }\n    }\n\n    componentDidMount() {\n        http.doGet(routesModule.routes.GET_ALBUM(this.props.match.params.id))\n            .then(result => this.setState({album: result}));\n    }\n\n    openDetails(picture) {\n        this.setState({openPicture: picture});\n    }\n\n    onCrossClick() {\n        this.setState({openPicture: null});\n    }\n\n    deleteItem(picture) {\n        this.props.deleteFotoFromAlbum(picture.id, this.state.album.id);\n        const newPictures = this.state.album.images.filter(p => p.id != picture.id);\n        const newAlbum = Object.assign({}, {\n            ...this.state.album,\n            images: newPictures,\n        })\n        this.setState({album: newAlbum});\n    }\n\n    changeDragState(obj) {\n        this.setState(obj);\n    }\n\n    saveFotoDescription(picture) {\n        const newPictures = [...this.state.album.images];\n        const editedPicture = this.state.album.images.find(p => p.id == picture.id);\n        if(this.input.value) editedPicture.name = this.input.value;\n        if(this.text.value) editedPicture.text = this.text.value;\n\n        this.props.saveFotoDescription(this.state.album.id, editedPicture);\n\n        const newAlbum = Object.assign({}, {\n            ...this.state.album,\n            images: newPictures,\n        });\n        this.setState({album: newAlbum, openPicture: null});\n    }\n\n    render() {\n        const {openPicture,album} = this.state;\n        return album && (\n            <div className='edit_container'>\n                {album.images.sort((x,y) => x.order-y.order).map(p => <Card\n                    key={p.id}\n                    picture={p}\n                    pictures={album.images}\n                    openDetails={(p) => this.openDetails(p)}\n                    deleteItem={(p) => this.deleteItem(p)}\n                    replaceImage={(target) => this.replaceImage(target)}\n                    openPicture={openPicture}\n                    changeDragState={(obj) => this.changeDragState(obj)}\n                    dragState={this.state}\n                />)}\n                <FileInput className='new_image' disabled={openPicture} label='Choose new foto'/>\n                {openPicture &&\n                <div className='new_text' ref={t => this.text = t}>\n                    <input defaultValue={openPicture.name} ref={i => this.input = i}/>\n                    <textarea defaultValue={openPicture.text} ref={t => this.textarea = t}/>\n                    <SaveIcon className='save_icon' onClick={() => this.saveFotoDescription(openPicture)}/>\n                    <CrossIcon className='cross_icon' onClick={() => this.onCrossClick()}/>\n                </div>}\n\n            </div>\n        );\n    }\n}\n\nexport default EditAlbum;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/EditAlbum.jsx"],"sourceRoot":""}