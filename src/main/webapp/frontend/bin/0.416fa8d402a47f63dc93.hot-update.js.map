{"version":3,"sources":["webpack:///./components/picture/Preview.jsx"],"names":["BottomSection","styled","div","props","imageWidth","increase","constants","preview_frame_color","decrease","Modal","animationTime","Preview","React","Component","constructor","parseInt","state","animate","currentSlide","main","setImageWidth","width","setState","clearAnimate","slide","close","window","setTimeout","componentDidMount","clearAnimation","renderThumb","style","thumbStyle","backgroundColor","height","calculateTextWidth","imgWidth","bottomSection","document","getElementsByClassName","currentStyle","getComputedStyle","paddings","parseFloat","paddingLeft","paddingRight","calculateTextHeight","caption","bottomSectionStyle","paddingTop","paddingBottom","captionStyle","render","images","editRoute","s","r","name","text"],"mappings":"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","file":"0.416fa8d402a47f63dc93.hot-update.js","sourcesContent":["import React from \"react\";\nimport styled, {keyframes} from 'styled-components';\n//import { Scrollbars } from 'react-custom-scrollbars';\nimport './preview.less';\nimport PreviewImageFrame from \"./PreviewImageFrame\";\nimport constants from './styles';\nimport Scroll from \"../scroll/Scroll\";\n\nconst BottomSection = styled.div`\n   width: ${props => props.imageWidth};\n`\n\nconst increase = (props) => keyframes`\n   0% {\n      height: 0;\n      width: 0;\n      background-color: transparent;\n  }\n  50% {\n      height: 90%;\n      width: ${props.imageWidth};\n      background-color: transparent;  \n  }\n  100% {\n      background-color: ${constants.preview_frame_color};\n  }\n`\n\nconst decrease = (props) => keyframes`\n   0% {\n      background-color: ${constants.preview_frame_color};\n   }\n   50% {\n      height: 90%;\n      width: ${props.imageWidth};\n      background-color: transparent;\n  }\n  100% {\n      height: 0;\n      width: 0;\n      background-color: transparent;\n  }\n`\n\nconst Modal = styled.div`\n&.increase {\n  .magnify_modal_img_frame {\n    animation: ${increase} ${props => props.animationTime}s ease;\n  }\n}\n\n&.decrease {\n  .magnify_modal_img_frame {\n    animation: ${decrease} ${props => props.animationTime}s ease;\n  }\n}\n`\n\nclass Preview extends React.Component {\n\n    constructor(props) {\n        super(props);\n\n        this.animationTime = parseInt(constants['preview_animation_duration']);\n\n        this.state = {\n            imageWidth: 0,\n            animate: '',\n            currentSlide: props.main\n        };\n    }\n\n    setImageWidth(width) {\n        this.setState({\n            imageWidth: width,\n        });\n    }\n\n    clearAnimate(slide) {\n        this.setState({\n            animate: '',\n            currentSlide: slide\n        });\n    }\n\n    close() {\n        if (!(this.state.animate === 'decrease')) {\n            this.setState({\n                animate: 'decrease'\n            });\n            window.setTimeout(this.props.close, this.animationTime * 1000);\n        }\n    }\n\n    componentDidMount() {\n        this.setState({\n            animate: 'increase'\n        });\n        window.setTimeout(() => this.clearAnimation(), this.animationTime * 1000);\n    }\n\n\n    clearAnimation(slide) {\n        this.setState({\n            animate: ''\n        });\n    }\n\n\n    renderThumb({style, ...props}) {\n        const thumbStyle = {\n            backgroundColor: 'white',\n            height: '70%'\n        };\n        return (\n            <div\n                style={{...style, ...thumbStyle}}\n                {...props}/>\n        );\n    }\n\n    calculateTextWidth(imgWidth) {\n        const bottomSection = document.getElementsByClassName('magnify_modal_img_frame_bottom')[0];\n        if(bottomSection){\n            const style = bottomSection.currentStyle || window.getComputedStyle(bottomSection);\n            const paddings = parseFloat(style.paddingLeft) + parseFloat(style.paddingRight);\n            return parseFloat(imgWidth) - paddings;\n        }\n        return 0;\n    }\n\n    calculateTextHeight() {\n        const bottomSection = document.getElementsByClassName('magnify_modal_img_frame_bottom')[0];\n\n        if(bottomSection && this.caption){\n            const bottomSectionStyle = bottomSection.currentStyle || window.getComputedStyle(bottomSection);\n            const paddings = parseFloat(bottomSectionStyle.paddingTop) + parseFloat(bottomSectionStyle.paddingBottom);\n\n            const captionStyle = this.caption.currentStyle || window.getComputedStyle(this.caption);\n            return parseFloat(bottomSectionStyle.height) - paddings - parseFloat(captionStyle.height);\n        }\n        return 0;\n    }\n\n    render() {\n        const {animate, imageWidth} = this.state;\n        const {images, main} = this.props;\n\n        return (\n            <Modal className={`magnify_modal ${animate}`}\n                   imageWidth={imageWidth}\n                   animationTime={this.animationTime}>\n                <div className='magnify_modal_img_frame'>\n                    <PreviewImageFrame main={main}\n                                       images={images}\n                                       editRoute={this.props.editRoute}\n                                       setImageWidth={(width) => {\n                                           this.setImageWidth(width)\n                                       }}\n                                       close={() => this.close()}\n                                       clearAnimate={(s) => this.clearAnimate(s)}\n                    />\n\n                    <BottomSection className='magnify_modal_img_frame_bottom'\n                                   imageWidth={imageWidth}>\n\n                        <div className='magnify_modal_img_frame_bottom_caption' ref={r => this.caption = r }>{this.state.currentSlide.name}</div>\n\n                        <Scroll height={this.calculateTextHeight()}\n                                width={this.calculateTextWidth(imageWidth)}\n                                className='magnify_modal_img_frame_bottom_text'\n                                progress={true}>\n                            <div>{this.state.currentSlide.text}</div>\n                        </Scroll>\n\n                    </BottomSection>\n\n                </div>\n            </Modal>\n        );\n    }\n}\n\nexport default Preview;\n\n\n// WEBPACK FOOTER //\n// ./components/picture/Preview.jsx"],"sourceRoot":""}