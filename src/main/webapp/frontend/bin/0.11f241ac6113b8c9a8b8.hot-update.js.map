{"version":3,"sources":["webpack:///./components/scroll/Scroll.jsx"],"names":["Scroll","React","Component","constructor","props","track","cont","text","scroll","speed","state","currentScrollY","dragStarted","componentDidMount","setStyles","componentDidUpdate","prevProps","window","setTimeout","style","height","width","calculateScrollHeight","contRect","getBoundingClientRect","textRect","Math","round","parseInt","onWheel","e","scrollDeltaFunc","deltaY","progress","progressScrollTo","scrollTo","onDrag","preventDefault","getScrollDelta","setState","clientY","getScrollDirectionAsNumber","scrollStyle","currentStyle","getComputedStyle","trackStyle","scrollTop","top","scrollGap","nextScrollTop","nextTextTop","changeTextTop","minScrollHeight","scrollHeight","trackHeight","nextScrollHeight","textStyle","contStyle","minTextScroll","isScrollNeeded","parseFloat","onStart","onMouseDown","onMouseLeave","render","Children","toArray","children","contentWithoutScroll","className","node","contentWithScroll"],"mappings":"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","file":"0.11f241ac6113b8c9a8b8.hot-update.js","sourcesContent":["import React from 'react';\nimport './scroll.less';\n\n// ---- Required props\n// width\n// height\n\n// ---- Other props\n// progress\n// className\n\nclass Scroll extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.track = null;\n        this.cont = null;\n        this.text = null;\n        this.scroll = null;\n\n        this.speed = this.props.speed || 2;\n        this.state = {\n            currentScrollY: 0,\n            dragStarted: false\n        }\n    }\n\n    componentDidMount() {\n        this.setStyles();\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps != this.props) {\n            window.setTimeout(() => this.setStyles(), 100);\n        }\n    }\n\n    setStyles() {\n        if (this.cont) {\n            this.cont.style.height = this.props.height;\n            this.cont.style.width = this.props.width;\n        }\n        if (this.track) {\n            this.track.style.height = this.props.height;\n        }\n        if (this.scroll) {\n            this.scroll.style.height = this.calculateScrollHeight();\n        }\n    }\n\n    calculateScrollHeight() {\n        const contRect = this.cont.getBoundingClientRect();\n        const textRect = this.text.getBoundingClientRect();\n\n        return Math.round(parseInt(contRect.height) * parseInt(contRect.height) / parseInt(textRect.height));\n    }\n\n    onWheel(e) {\n        const scrollDeltaFunc = () => e.deltaY > 0 ? 1 : (e.deltaY < 0 ? -1 : 0);\n        this.props.progress\n            ? this.progressScrollTo(scrollDeltaFunc)\n            : this.scrollTo(scrollDeltaFunc);\n    }\n\n    onDrag(e) {\n        e.preventDefault();\n        if (!this.state.dragStarted) {\n            return;\n        }\n        this.props.progress\n            ? this.progressScrollTo(() => this.getScrollDelta(e))\n            : this.scrollTo(() => this.getScrollDelta(e));\n\n        this.setState({\n            currentScrollY: e.clientY\n        });\n    }\n\n    scrollTo(getScrollDirectionAsNumber) {\n        const scrollStyle = this.scroll.currentStyle || window.getComputedStyle(this.scroll);\n        const trackStyle = this.track.currentStyle || window.getComputedStyle(this.track);\n\n        const scrollTop = parseInt(scrollStyle.top);\n        const scrollGap = (parseInt(trackStyle.height) - parseInt(scrollStyle.height));\n\n        if ((scrollTop <= 0 && getScrollDirectionAsNumber() < 0)\n            || (scrollTop > scrollGap - 1 && getScrollDirectionAsNumber() > 0)\n            || getScrollDirectionAsNumber() == 0) {\n            return;\n        }\n\n        const nextScrollTop = scrollTop + getScrollDirectionAsNumber() * this.speed;\n\n        this.scroll.style.top = nextScrollTop + 'px';\n\n        const nextTextTop = Math.round(-nextScrollTop * (parseInt(trackStyle.height) / parseInt(scrollStyle.height)));\n\n        this.changeTextTop(nextTextTop);\n    }\n\n    progressScrollTo(getScrollDirectionAsNumber) {\n        const scrollStyle = this.scroll.currentStyle || window.getComputedStyle(this.scroll);\n        const trackStyle = this.track.currentStyle || window.getComputedStyle(this.track);\n\n        const minScrollHeight = this.calculateScrollHeight();\n        const scrollHeight = parseInt(scrollStyle.height);\n        const trackHeight = parseInt(trackStyle.height);\n\n        if ((scrollHeight <= minScrollHeight && getScrollDirectionAsNumber() < 0)\n            || (scrollHeight >= trackHeight && getScrollDirectionAsNumber() > 0)\n            || getScrollDirectionAsNumber() == 0) {\n            return;\n        }\n\n        const nextScrollHeight = scrollHeight + getScrollDirectionAsNumber() * this.speed;\n\n        this.scroll.style.height = nextScrollHeight + 'px';\n\n        const nextTextTop = Math.round(-(nextScrollHeight - minScrollHeight) * (parseInt(trackStyle.height) / minScrollHeight));\n\n        this.changeTextTop(nextTextTop);\n    }\n\n    changeTextTop(nextTextTop) {\n        const textStyle = this.text.currentStyle || window.getComputedStyle(this.text);\n        const contStyle = this.cont.currentStyle || window.getComputedStyle(this.cont);\n        const minTextScroll = -(parseInt(textStyle.height) - parseInt(contStyle.height));\n\n        if (nextTextTop > 0) {\n            this.text.style.top = 0 + 'px';\n        } else if (nextTextTop < minTextScroll) {\n            this.text.style.top = minTextScroll + 'px';\n        } else {\n            this.text.style.top = nextTextTop + 'px';\n        }\n\n    }\n\n    isScrollNeeded() {\n        if (!this.text || !this.cont) {\n            return false;\n        }\n        const textStyle = this.text.currentStyle || window.getComputedStyle(this.text);\n        const contStyle = this.cont.currentStyle || window.getComputedStyle(this.cont);\n        return (parseFloat(textStyle.height) - parseFloat(contStyle.height)) > 1;\n    }\n\n    getScrollDelta(e) {\n        if (e.clientY > this.state.currentScrollY) {\n            return 1;\n        }\n        if (e.clientY < this.state.currentScrollY) {\n            return -1;\n        }\n        return 0;\n    }\n\n    onStart(e) {\n        e.preventDefault();\n        return false;\n    }\n\n    onMouseDown(e) {\n        e.preventDefault();\n        this.setState({dragStarted: true});\n    }\n\n\n    onMouseLeave(e) {\n        e.preventDefault();\n        this.setState({dragStarted: false});\n    }\n\n    render() {\n        const Children = () => React.Children.toArray(this.props.children) || null;\n        const contentWithoutScroll = <div className={`text_container ${this.props.className || ''}`}\n                                          ref={node => this.cont = node}>\n            <div className='text'\n                 ref={node => this.text = node}>\n                <Children/>\n            </div>\n        </div>;\n        const contentWithScroll = (\n            <div className={`text_container ${this.props.className || ''}`}\n                 ref={node => this.cont = node}\n                 onWheel={(e) => this.onWheel(e)}\n                 onMouseLeave={(e) => this.onMouseLeave(e)}\n                 onMouseMove={(e) => this.onDrag(e)}\n                 onMouseDown={(e) => this.onMouseDown(e)}\n                 onMouseUp={() => this.setState({dragStarted: false})}>\n                <div className='text'\n                     ref={node => this.text = node}>\n                    <Children/>\n                </div>\n\n                <div className={`scroll_track ${this.props.progress ? 'progress_track' : ''}`}\n                     ref={node => this.track = node}>\n                    <div className='scroll'\n                         ref={node => this.scroll = node}\n                    />\n                </div>\n            </div>\n        );\n        return this.isScrollNeeded() ? contentWithScroll : contentWithoutScroll;\n    }\n}\n\nexport default Scroll;\n\n\n\n// WEBPACK FOOTER //\n// ./components/scroll/Scroll.jsx"],"sourceRoot":""}