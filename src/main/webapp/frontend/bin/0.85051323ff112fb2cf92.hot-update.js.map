{"version":3,"sources":["webpack:///./components/scroll/Scroll.jsx"],"names":["Scroll","React","Component","constructor","props","track","cont","text","scroll","speed","state","currentScrollY","dragStarted","componentDidMount","style","height","width","calculateScrollHeight","componentWillReceiveProps","nextProps","contRect","getBoundingClientRect","textRect","Math","round","parseInt","onWheel","e","scrollTo","deltaY","onDrag","preventDefault","progress","progressScrollTo","getScrollDelta","setState","clientY","getScrollDirectionAsNumber","scrollStyle","currentStyle","window","getComputedStyle","trackStyle","scrollTop","top","scrollGap","nextScrollTop","nextTextTop","changeTextTop","minScrollHeight","scrollHeight","nextScrollHeight","textStyle","contStyle","minTextScroll","onStart","onMouseDown","onMouseLeave","render","FirstChild","childrenArray","Children","toArray","children","node"],"mappings":"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","file":"0.85051323ff112fb2cf92.hot-update.js","sourcesContent":["import React from 'react';\nimport './scroll.less';\n\nclass Scroll extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.track = null;\n    this.cont = null;\n    this.text = null;\n    this.scroll = null;\n\n    this.speed = this.props.speed || 2;\n    this.state = {\n      currentScrollY: 0,\n      dragStarted: false\n    }\n  }\n\n  componentDidMount() {\n    this.cont.style.height = this.props.height;\n    this.cont.style.width = this.props.width;\n    this.track.style.height = this.props.height;\n\n    this.scroll.style.height = this.calculateScrollHeight();\n  }\n\n  componentWillReceiveProps(nextProps){\n    this.cont.style.height = nextProps.height;\n    this.cont.style.width = nextProps.width;\n    this.track.style.height = nextProps.height;\n\n    this.scroll.style.height = this.calculateScrollHeight();\n  }\n\n  calculateScrollHeight() {\n    const contRect = this.cont.getBoundingClientRect();\n    const textRect = this.text.getBoundingClientRect();\n\n    return Math.round(parseInt(contRect.height) * parseInt(contRect.height) / parseInt(textRect.height));\n  }\n\n  onWheel(e) {\n    this.scrollTo(() => e.deltaY > 0 ? 1 : (e.deltaY < 0 ? -1 : 0));\n  }\n\n  onDrag(e) {\n    e.preventDefault();\n    if (!this.state.dragStarted) {\n      return;\n    }\n    this.props.progress\n      ? this.progressScrollTo(() => this.getScrollDelta(e))\n      : this.scrollTo(() => this.getScrollDelta(e));\n\n    this.setState({\n      currentScrollY: e.clientY\n    });\n  }\n\n  scrollTo(getScrollDirectionAsNumber) {\n    const scrollStyle = this.scroll.currentStyle || window.getComputedStyle(this.scroll);\n    const trackStyle = this.track.currentStyle || window.getComputedStyle(this.track);\n\n    const scrollTop = parseInt(scrollStyle.top);\n    const scrollGap = (parseInt(trackStyle.height) - parseInt(scrollStyle.height));\n\n    if ((scrollTop <= 0 && getScrollDirectionAsNumber() < 0)\n      || (scrollTop > scrollGap - 1 && getScrollDirectionAsNumber() > 0)\n      || getScrollDirectionAsNumber() == 0) {\n      return;\n    }\n\n    const nextScrollTop = scrollTop + getScrollDirectionAsNumber() * this.speed;\n\n    this.scroll.style.top = nextScrollTop + 'px';\n\n    const nextTextTop = Math.round(-nextScrollTop * (parseInt(trackStyle.height) / parseInt(scrollStyle.height)));\n\n    this.changeTextTop(nextTextTop);\n  }\n\n  progressScrollTo(getScrollDirectionAsNumber) {\n    const scrollStyle = this.scroll.currentStyle || window.getComputedStyle(this.scroll);\n    const trackStyle = this.track.currentStyle || window.getComputedStyle(this.track);\n\n    const minScrollHeight = this.calculateScrollHeight();\n    const scrollHeight = parseInt(scrollStyle.height);\n\n    if ((scrollHeight <= minScrollHeight && getScrollDirectionAsNumber() < 0)\n      || (scrollHeight >= trackStyle.height && getScrollDirectionAsNumber() > 0)\n      || getScrollDirectionAsNumber() == 0) {\n      return;\n    }\n\n    const nextScrollHeight = scrollHeight + getScrollDirectionAsNumber() * this.speed;\n\n    this.scroll.style.height = nextScrollHeight + 'px';\n\n    const nextTextTop = Math.round(- (nextScrollHeight - minScrollHeight) * (parseInt(trackStyle.height) / minScrollHeight));\n\n    this.changeTextTop(nextTextTop);\n  }\n\n  changeTextTop(nextTextTop) {\n    const textStyle = this.text.currentStyle || window.getComputedStyle(this.text);\n    const contStyle = this.cont.currentStyle || window.getComputedStyle(this.cont);\n    const minTextScroll = -(parseInt(textStyle.height) - parseInt(contStyle.height));\n\n    if (nextTextTop > 0) {\n      this.text.style.top = 0 + 'px';\n    } else if (nextTextTop < minTextScroll) {\n      this.text.style.top = minTextScroll + 'px';\n    } else {\n      this.text.style.top = nextTextTop + 'px';\n    }\n\n  }\n\n  getScrollDelta(e) {\n    if (e.clientY > this.state.currentScrollY) {\n      return 1;\n    }\n    if (e.clientY < this.state.currentScrollY) {\n      return -1;\n    }\n    return 0;\n  }\n\n  onStart(e) {\n    e.preventDefault();\n    return false;\n  }\n\n  onMouseDown(e) {\n    e.preventDefault();\n    this.setState({dragStarted: true});\n  }\n\n\n  onMouseLeave(e) {\n    e.preventDefault();\n    this.setState({dragStarted: false});\n  }\n\n  render() {\n    const FirstChild = () => {\n      const childrenArray = React.Children.toArray(this.props.children);\n      return childrenArray[0] || null;\n    }\n    return (\n      <div className='text_container'\n           ref={node => this.cont = node}\n           onWheel={(e) => this.onWheel(e)}\n           onMouseLeave={(e) => this.onMouseLeave(e)}\n           onMouseMove={(e) => this.onDrag(e)}\n           onMouseDown={(e) => this.onMouseDown(e)}\n           onMouseUp={() => this.setState({dragStarted: false})}\n      >\n        <div className='text'\n             ref={node => this.text = node}>\n          <FirstChild/>\n        </div>\n\n        <div className={`scroll_track ${this.props.progress ? 'progress_track' : ''}`}\n             ref={node => this.track = node}>\n          <div className='scroll'\n               ref={node => this.scroll = node}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Scroll;\n\n\n\n// WEBPACK FOOTER //\n// ./components/scroll/Scroll.jsx"],"sourceRoot":""}