{"version":3,"sources":["webpack:///./components/newAlbum/AddNewAlbum.jsx"],"names":["routesModule","require","Label","styled","span","AddNewAlbum","connect","store","createAlbum","React","Component","constructor","props","modal","state","height","name","description","src","fileUploading","componentDidMount","setTimeout","scrollbars","forceUpdate","calculateModalHeight","w","window","d","document","e","documentElement","g","getElementsByTagName","y","innerHeight","clientHeight","modalStyle","currentStyle","getComputedStyle","Math","min","parseInt","setState","uploadFile","file","http","sendFile","routes","UPLOAD_FOTO","then","id","catch","closeModal","render","r","target","value","isVideo"],"mappings":"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","file":"0.748372dd7f393192743a.hot-update.js","sourcesContent":["import React from 'react';\nimport styled from 'styled-components';\nimport {CrossIcon} from \"../Icons\";\nimport FileInput from \"../fileInput/FileInput\";\nimport './addNewAlbum.less';\nimport connect from \"react-redux/es/connect/connect\";\nimport {isVideo} from \"../../utils/index\";\nimport {Scrollbars} from \"react-custom-scrollbars\";\nconst routesModule = require('../../constants/routes');\nimport http from '../../HttpService';\nimport {\n    createAlbum\n} from \"../../actions/albumActions\";\n\nconst Label = styled.span`\n  width: 100%;\n  margin-bottom: 0.25rem;\n`\n\n@connect(store => ({}), {\n    createAlbum\n})\nclass AddNewAlbum extends React.Component {\n    constructor(props) {\n        super(props);\n        this.modal = null;\n        this.state = {\n            height: '100%',\n            name: '',\n            description: '',\n            src: null,\n            fileUploading: false\n        }\n    }\n\n    componentDidMount() {\n        setTimeout(() => this.scrollbars.forceUpdate(), 100);\n\n        // window.addEventListener('resize', () => this.calculateModalHeight())\n        this.calculateModalHeight();\n    }\n\n    calculateModalHeight() {\n        var w = window,\n            d = document,\n            e = d.documentElement,\n            g = d.getElementsByTagName('body')[0],\n            y = w.innerHeight || e.clientHeight || g.clientHeight;\n\n        if (this.modal) {\n            const modalStyle = this.modal.currentStyle || window.getComputedStyle(this.modal);\n            const height = Math.min(parseInt(y), parseInt(modalStyle.height)) + 'px';\n            this.setState({\n                height\n            });\n        }\n    }\n\n    uploadFile(file) {\n        this.setState({fileUploading: true});\n        http.sendFile(routesModule.routes.UPLOAD_FOTO, file)\n            .then(id => {\n                this.setState({src: id.src, fileUploading: false});\n            })\n            .catch(e => this.setState({fileUploading: false}));\n    }\n\n    createAlbum() {\n        const {name, description, src} = this.state;\n        if (name && description && src) {\n            this.props.createAlbum({\n                name, description, src\n            });\n            this.props.closeModal();\n        }\n\n    }\n\n    render() {\n        const {name, description, src, fileUploading, height} = this.state;\n\n        return <div className='add_album'>\n            <Scrollbars\n                hideTracksWhenNotNeeded={true}\n                className=\"scroll_bar\"\n                // renderTrackVertical={({ style, ...props }) =>\n                        //     <div {...props} style={{ ...style, backgroundColor: 'blue' }}/>}\n                         // renderTrackVertical={props => <div {...props} className=\"track-vertical\"/>}\n                         // renderThumbVertical={props => <div {...props} className=\"thumb-vertical\"/>}\n                        ref={(scrollbars) => this.scrollbars = scrollbars}\n            >\n            <div className='add_album_modal' ref={r => this.modal = r}>\n\n                <CrossIcon className=\"cross_icon\" onClick={this.props.closeModal}/>\n                <Label>Name</Label>\n                <input value={name} onChange={(e) => this.setState({name: e.target.value})}/>\n                <Label>Title image:</Label>\n\n                {src\n                    ? (isVideo(src) ? <video controls=\"controls\"><source src={src}/></video> : <img src={src}/>)\n                    :\n                    <FileInput label='Choose main foto'\n                               uploadFile={(file) => this.uploadFile(file)}/>}\n                <Label>Description</Label>\n                <textarea value={description} onChange={(e) => this.setState({description: e.target.value})}/>\n                {src && !isVideo(src) && <div className=\"warning\">You will be able to rotate your foto in the edit mode after album creation.</div>}\n                <button className=\"ok_button\" onClick={() => this.createAlbum()}>ok</button>\n\n            </div>\n            </Scrollbars>\n        </div>\n\n\n    }\n}\n\nexport default AddNewAlbum;\n\n\n// WEBPACK FOOTER //\n// ./components/newAlbum/AddNewAlbum.jsx"],"sourceRoot":""}