{"version":3,"sources":["webpack:///./components/editAlbum/EditAlbum.jsx","webpack:///./components/editAlbum/Card.jsx"],"names":["EditAlbum","React","Component","constructor","props","pictures","id","src","order","state","dragStarted","dragFrom","dragFromEl","dragObj","isTextOpen","componentDidMount","replaceImage","target","attr","getAttribute","picture","find","p","setState","prevOrder","openDetails","onCrossClick","deleteItem","changeDragState","obj","render","sort","x","y","map","e","onMouseUp","onMouseMove","t","text","Card","replaceEvent","componentWillReceiveProps","dragContainer","replaceAttached","addEventListener","onMouseDown","preventDefault","parentElement","clientX","window","scrollX","clientY","scrollY","style","currentStyle","getComputedStyle","elStartLeft","parseInt","left","elStartTop","top","zIndex","dragState","event","Event","document","elementFromPoint","dispatchEvent","r"],"mappings":"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","file":"0.850b9a1401e574206bcf.hot-update.js","sourcesContent":["import React from 'react';\nimport './editAlbum.less';\nimport FileInput from \"../fileInput/FileInput\";\nimport {CrossIcon, SaveIcon} from \"../Icons\";\nimport Card from \"./Card\";\n\nclass EditAlbum extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.pictures = [{\n            id: 1,\n            src: '/foto/download.jpg',\n            order: 1\n        }, {\n            id: 2,\n            src: '/foto/images.jpg',\n            order: 2\n        }];\n        this.state = {\n            dragStarted: false,\n            dragFrom: null,\n            dragFromEl: null,\n            dragObj: null,\n            isTextOpen: false\n        }\n    }\n\n    componentDidMount() {\n    }\n\n    replaceImage(target) {\n        const dragFrom = this.state.dragFrom;\n\n        const attr = target.getAttribute('imgid');\n        const picture = this.pictures.find(p => p.id == attr);\n\n        this.setState({dragStarted: false, dragFrom:null, dragObj:null, dragFromEl:null});\n\n        const prevOrder = dragFrom.order;\n        dragFrom.order = picture.order;\n        picture.order = prevOrder;\n    }\n\n    // onMouseUp(e, picture) {\n    //     e.preventDefault();\n    //     const target = e.target.parentElement;\n    //     const dragFrom = this.state.dragFrom;\n    //\n    //     this.state.dragFromEl.style.top = '0px';\n    //     this.state.dragFromEl.style.left = '0px';\n    //\n    //     target.style.top = '0px';\n    //     target.style.left = '0px';\n    //\n    //     this.state.dragFromEl.style.zIndex = 0;\n    //\n    //     if(picture == this.state.dragFrom) {\n    //         const event = new Event('replace');\n    //         document.elementFromPoint(e.clientX + window.scrollX, e.clientY + window.scrollY)\n    //             .parentElement\n    //             .dispatchEvent(event);\n    //         return;\n    //     }\n    //\n    //     this.setState({dragStarted: false, dragFrom:null, dragObj:null, dragFromEl:null});\n    //     const prevOrder = dragFrom.order;\n    //     dragFrom.order = picture.order;\n    //     picture.order = prevOrder;\n    //\n    // }\n\n    openDetails() {\n        this.setState({\n            isTextOpen: true\n        });\n    }\n\n    onCrossClick() {\n        this.setState({\n            isTextOpen: false\n        })\n    }\n\n    deleteItem() {\n\n    }\n\n    changeDragState(obj) {\n        this.setState(obj);\n    }\n\n    render() {\n        const {isTextOpen} = this.state;\n        return (\n            <div className='edit_container'>\n                {this.pictures.sort((x,y) => x.order-y.order).map(p => <Card\n                    key={p.id}\n                    picture={p}\n                    onMouseUp={e => this.onMouseUp(e, p)}\n                    onMouseMove={e => this.onMouseMove(e, p)}\n                    openDetails={() => this.openDetails()}\n                    deleteItem={() => this.deleteItem()}\n                    replaceImage={(target) => this.replaceImage(target)}\n                    isTextOpen={isTextOpen}\n                    changeDragState={(obj) => this.changeDragState(obj)}\n                    dragState={this.state}\n                />)}\n                <FileInput className='new_image' disabled={isTextOpen}/>\n                {isTextOpen &&\n                <div className='new_text' ref={t => this.text = t}>\n                    <input/>\n                    <textarea/>\n                    <SaveIcon className='save_icon'/>\n                    <CrossIcon className='cross_icon' onClick={() => this.onCrossClick()}/>\n                </div>}\n\n            </div>\n        );\n    }\n}\n\nexport default EditAlbum;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/EditAlbum.jsx","import React from 'react';\nimport './editAlbum.less';\nimport {CrossIcon, EditIcon} from \"../Icons\";\n\nclass Card extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.replaceEvent = 'replace';\n    }\n\n    componentWillReceiveProps() {\n        if (this.dragContainer && !this.replaceAttached) {\n            this.replaceAttached = true;\n            this.dragContainer.addEventListener(this.replaceEvent, (e)=>this.props.replaceImage(e.target));\n        }\n    }\n\n    onMouseDown(e, picture) {\n        e.preventDefault();\n        const target = e.target.parentElement;\n\n        const x = e.clientX + window.scrollX;\n        const y = e.clientY + window.scrollY;\n\n        const style = target.currentStyle || window.getComputedStyle(target);\n\n        const elStartLeft = parseInt(style.left, 10);\n        const elStartTop = parseInt(style.top, 10);\n        const dragObj = {\n            x, y, elStartLeft, elStartTop\n        }\n        this.props.changeDragState({dragStarted: true, dragFrom:picture, dragObj, dragFromEl: target});\n        target.style.zIndex = 10;\n    }\n\n    onMouseMove(e, picture) {\n        e.preventDefault();\n        const {dragFrom, dragStarted, dragObj} = this.props.dragState;\n        const target = e.target.parentElement;\n        if(dragStarted && dragFrom == picture) {\n            const x = e.clientX + window.scrollX;\n            const y = e.clientY + window.scrollY;\n            target.style.top = (dragObj.elStartTop + y - dragObj.y) + 'px';\n            target.style.left = (dragObj.elStartLeft + x - dragObj.x) + 'px';\n        }\n    }\n\n  onMouseUp(e, picture) {\n    e.preventDefault();\n\n    const {dragFrom, dragFromEl} = this.props.dragState;\n    const target = e.target.parentElement;\n\n    dragFromEl.style.top = '0px';\n    dragFromEl.style.left = '0px';\n\n    target.style.top = '0px';\n    target.style.left = '0px';\n\n    dragFromEl.style.zIndex = 0;\n\n    if  (picture == dragFrom) {\n      const event = new Event(this.replaceEvent);\n      document.elementFromPoint(e.clientX + window.scrollX, e.clientY + window.scrollY)\n        .parentElement\n        .dispatchEvent(event);\n      return;\n    }\n\n    this.props.changeDragState({dragStarted: false, dragFrom:null, dragObj:null, dragFromEl:null});\n\n    const prevOrder = dragFrom.order;\n    dragFrom.order = picture.order;\n    picture.order = prevOrder;\n\n  }\n\n    render() {\n        const {picture, isTextOpen} = this.props;\n        return isTextOpen\n            ? <div className='drag_container'\n                   imgid={picture.id}>\n                <img className='drag_image'\n                     src={picture.src}\n                     draggable={false}/>\n            </div>\n            : <div className='drag_container'\n                   ref={r => this.dragContainer = r}\n                   imgid={picture.id}\n                   draggable={true}\n                   onDoubleClick={this.props.openDetails}\n                   onMouseDown={e => this.onMouseDown(e, picture)}\n                   onMouseUp={e => this.onMouseUp(e, picture)}\n                   onMouseMove={e => this.onMouseMove(e, picture)}>\n                <img className='drag_image' src={picture.src}/>\n                <CrossIcon className='cross_icon' onClick={this.props.deleteItem}/>\n                <EditIcon className='edit_icon' onClick={this.props.openDetails}/>\n            </div>\n    }\n}\n\nexport default Card;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/Card.jsx"],"sourceRoot":""}