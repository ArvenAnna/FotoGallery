{"version":3,"sources":["webpack:///./components/picture/Picture.jsx"],"names":["Picture","React","Component","constructor","props","state","magnify","valid","click","setState","animation","closePreview","mouseLeave","e","chooseAnimation","mouseEnter","fade","move","findSide","direction","clientRect","target","getClientRects","diffs","side","diff","Math","abs","clientX","left","right","clientY","top","bottom","minDiff","min","Array","from","el","find","handleBrokenImg","render","main","src","text","editRoute","images"],"mappings":"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","file":"0.e445208a729e6895de8d.hot-update.js","sourcesContent":["import React from \"react\";\nimport {MagnifierIcon} from \"../Icons\";\nimport \"./picture.less\";\nimport Preview from \"./Preview\";\n\nclass Picture extends React.Component {\n    // animation: fade, move\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            magnify: '',\n            valid: true\n        };\n    }\n\n    click() {\n        this.setState({\n            magnify: 'magnify',\n            animation: ''\n        });\n    };\n\n    closePreview() {\n        this.setState({\n            magnify: ''\n        });\n    }\n\n    mouseLeave(e) {\n        !this.state.magnify && this.chooseAnimation(e, 'fade_out', 'from');\n    };\n\n    mouseEnter(e) {\n        !this.state.magnify && this.chooseAnimation(e, 'fade_in', 'to');\n    };\n\n    chooseAnimation(e, fade, move) {\n        switch (this.props.animation) {\n            case 'fade':\n                this.setState({\n                    animation: fade\n                });\n                break;\n            case 'move':\n                this.setState({\n                    animation: this.findSide(e, move)\n                });\n        }\n    }\n\n    findSide(e, direction) {\n        const clientRect = e.target.getClientRects()[0];\n        const diffs = [\n            {\n                side: `move_${direction}_right`,\n                diff: Math.abs(e.clientX - clientRect.left)\n            }, {\n                side: `move_${direction}_left`,\n                diff: Math.abs(e.clientX - clientRect.right)\n            }, {\n                side: `move_${direction}_bottom`,\n                diff: Math.abs(e.clientY - clientRect.top)\n            }, {\n                side: `move_${direction}_top`,\n                diff: Math.abs(e.clientY - clientRect.bottom)\n            }\n        ];\n\n        const minDiff = Math.min(...Array.from(diffs, el => el.diff));\n        return diffs.find(el => el.diff == minDiff).side;\n    }\n\n    handleBrokenImg(e) {\n        this.setState({\n            valid: false\n        })\n    }\n\n    render() {\n        const {main} = this.props;\n        const {animation, magnify} = this.state;\n        return this.state.valid && <div>\n                <div\n                    className={`image_wrapper ${animation} ${magnify}`}\n                    onMouseLeave={(e) => this.mouseLeave(e)}\n                    onMouseEnter={(e) => this.mouseEnter(e)}\n                    onClick={(e) => this.click(e)}\n                >\n                    <img className='image'\n                         onError={(e) => this.handleBrokenImg(e)}\n                         src={main.src}\n                         alt=\"something wrong happens\"/>\n                    <div className={'overlay'}>\n                        <div className={`overlay_top`}>\n                            <MagnifierIcon/>\n                        </div>\n                        <div className={`overlay_bottom`}>\n                            <div className='overlay_bottom_text'>{main.text}</div>\n                        </div>\n                    </div>\n                </div>\n                {magnify &&\n                <Preview main={main}\n                         close={() => this.closePreview()}\n                         editRoute={this.props.editRoute}\n                         images={this.props.images}/>}\n            </div>;\n    }\n}\n\nexport default Picture;\n\n\n// WEBPACK FOOTER //\n// ./components/picture/Picture.jsx"],"sourceRoot":""}