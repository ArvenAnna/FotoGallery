{"version":3,"sources":["webpack:///./components/scroll/scroll.less","webpack:///./components/scroll/ProgressScroll.jsx"],"names":["ProgressScroll","React","Component","constructor","props","track","cont","text","scroll","speed","state","currentScrollY","dragStarted","componentDidMount","style","height","width","calculateScrollHeight","contRect","getBoundingClientRect","textRect","Math","round","parseInt","onWheel","e","scrollTo","deltaY","onDrag","preventDefault","getScrollDelta","setState","clientY","getScrollDirectionAsNumber","scrollStyle","currentStyle","window","getComputedStyle","trackStyle","minScrollHeight","scrollHeight","nextScrollHeight","textStyle","contStyle","nextTextTop","minTextScroll","top","onStart","onMouseDown","onMouseLeave","render","FirstChild","childrenArray","Children","toArray","children","node"],"mappings":"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","file":"0.d1548ea548bf38e4d39a.hot-update.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \":root {\\n  --scroll-track-width: 20px;\\n  --scroll-width: 20px;\\n  --scroll-color: rgba(1, 1, 1, 0.7);\\n  --track-color: rgba(1, 1, 1, 0.3);\\n}\\n.text_container {\\n  overflow: hidden;\\n  position: relative;\\n  padding-right: var(--scroll-track-width);\\n}\\n.text_container .text {\\n  position: relative;\\n  overflow: hidden;\\n}\\n.text_container .scroll_track {\\n  position: absolute;\\n  width: var(--scroll-track-width);\\n  top: 0;\\n  right: 0;\\n  cursor: default;\\n  border-radius: 3px;\\n  background-color: var(--track-color);\\n}\\n.text_container .scroll_track .scroll {\\n  --delta-width: calc(var(--scroll-track-width) - var(--scroll-width));\\n  position: relative;\\n  width: var(--scroll-width);\\n  left: calc(var(--delta-width) / 2);\\n  background-color: var(--scroll-color);\\n  cursor: default;\\n  border-radius: 3px;\\n}\\n.text_container .progress_track .scroll {\\n  border-radius: 0px;\\n  background: linear-gradient(0deg, var(--track-color), var(--scroll-color));\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader!./node_modules/autoprefixer-loader!./node_modules/less-loader/dist/cjs.js!./node_modules/js-to-styles-var-loader!./components/scroll/scroll.less\n// module id = 63\n// module chunks = 0","import React from 'react';\nimport './scroll.less';\n\nclass ProgressScroll extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.track = null;\n    this.cont = null;\n    this.text = null;\n    this.scroll = null;\n\n    this.speed = this.props.speed || 2;\n    this.state = {\n      currentScrollY: 0,\n      dragStarted: false\n    }\n  }\n\n  componentDidMount() {\n    this.cont.style.height = this.props.height;\n    this.cont.style.width = this.props.width;\n    this.track.style.height = this.props.height;\n\n    this.scroll.style.height = this.calculateScrollHeight();\n  }\n\n  calculateScrollHeight() {\n    const contRect = this.cont.getBoundingClientRect();\n    const textRect = this.text.getBoundingClientRect();\n\n    return Math.round(parseInt(contRect.height) * parseInt(contRect.height) / parseInt(textRect.height));\n  }\n\n  onWheel(e) {\n    this.scrollTo(() => e.deltaY > 0 ? 1 : (e.deltaY < 0 ? -1 : 0));\n  }\n\n  onDrag(e) {\n    e.preventDefault();\n    if(!this.state.dragStarted) {\n      return;\n    }\n\n    this.scrollTo(() => this.getScrollDelta(e));\n    this.setState({\n      currentScrollY: e.clientY\n    });\n  }\n\n  scrollTo(getScrollDirectionAsNumber) {\n    const scrollStyle = this.scroll.currentStyle || window.getComputedStyle(this.scroll);\n    const trackStyle = this.track.currentStyle || window.getComputedStyle(this.track);\n\n    const minScrollHeight = this.calculateScrollHeight();\n    const scrollHeight = parseInt(scrollStyle.height);\n\n    if ((scrollHeight <= minScrollHeight && getScrollDirectionAsNumber() < 0)\n      || (scrollHeight >= trackStyle.height && getScrollDirectionAsNumber() > 0)\n      || getScrollDirectionAsNumber() == 0) {\n      return;\n    }\n\n    const nextScrollHeight = scrollHeight + getScrollDirectionAsNumber() * this.speed;\n\n    this.scroll.style.height = nextScrollHeight + 'px';\n\n    const textStyle = this.text.currentStyle || window.getComputedStyle(this.text);\n    const contStyle = this.cont.currentStyle || window.getComputedStyle(this.cont);\n    const nextTextTop = Math.round(- (nextScrollHeight - minScrollHeight) * (parseInt(trackStyle.height) / minScrollHeight));\n\n    const minTextScroll = -(parseInt(textStyle.height) - parseInt(contStyle.height));\n\n    if (nextTextTop > 0) {\n      this.text.style.top = 0 + 'px';\n    } else if (nextTextTop < minTextScroll) {\n      this.text.style.top = minTextScroll + 'px';\n    } else {\n      this.text.style.top = nextTextTop + 'px';\n    }\n  }\n\n  getScrollDelta(e) {\n    if (e.clientY > this.state.currentScrollY) {\n      return 1;\n    }\n    if (e.clientY < this.state.currentScrollY) {\n      return -1;\n    }\n    return 0;\n  }\n\n  onStart(e) {\n    e.preventDefault();\n    return false;\n  }\n\n  onMouseDown(e) {\n    e.preventDefault();\n    this.setState({dragStarted: true});\n  }\n\n\n  onMouseLeave(e) {\n    e.preventDefault();\n    this.setState({dragStarted: false});\n  }\n\n  render() {\n    const FirstChild = () => {\n      const childrenArray = React.Children.toArray(this.props.children);\n      return childrenArray[0] || null;\n    }\n    return (\n      <div className='text_container'\n           ref={node => this.cont = node}\n           onWheel={(e) => this.onWheel(e)}\n           onMouseLeave={(e) => this.onMouseLeave(e)}\n           onMouseMove={(e) => this.onDrag(e)}\n           onMouseDown={(e) => this.onMouseDown(e)}\n           onMouseUp={() => this.setState({dragStarted: false})}\n      >\n        <div className='text'\n             ref={node => this.text = node}>\n          <FirstChild/>\n        </div>\n\n        <div className='scroll_track progress_track'\n             ref={node => this.track = node}>\n          <div className='scroll'\n               ref={node => this.scroll = node}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProgressScroll;\n\n\n\n\n// WEBPACK FOOTER //\n// ./components/scroll/ProgressScroll.jsx"],"sourceRoot":""}