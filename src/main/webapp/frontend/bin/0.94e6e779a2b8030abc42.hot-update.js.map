{"version":3,"sources":["webpack:///./components/editAlbum/EditAlbum.jsx"],"names":["routesModule","require","EditAlbum","connect","store","deleteFotoFromAlbum","React","Component","constructor","props","state","dragStarted","dragFrom","dragFromEl","dragObj","openPicture","album","componentDidMount","http","doGet","routes","GET_ALBUM","match","params","id","then","result","setState","openDetails","picture","onCrossClick","deleteItem","newPictures","images","filter","p","newAlbum","Object","assign","changeDragState","obj","saveFotoDescription","editedPicture","find","name","input","value","text","render","sort","x","y","order","map","target","replaceImage","t","i","textarea"],"mappings":"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","file":"0.94e6e779a2b8030abc42.hot-update.js","sourcesContent":["import React from 'react';\nimport './editAlbum.less';\nimport FileInput from \"../fileInput/FileInput\";\nimport {CrossIcon, SaveIcon} from \"../Icons\";\nimport Card from \"./Card\";\nimport http from '../../HttpService';\nimport connect from \"react-redux/es/connect/connect\";\nimport {deleteFotoFromAlbum} from \"../../actions/albumActions\";\nconst routesModule = require('../../constants/routes');\n\n@connect(store => ({\n\n}), {\n    deleteFotoFromAlbum\n})\nclass EditAlbum extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            dragStarted: false,\n            dragFrom: null,\n            dragFromEl: null,\n            dragObj: null,\n            openPicture: null,\n            album: null\n        }\n    }\n\n    componentDidMount() {\n        http.doGet(routesModule.routes.GET_ALBUM(this.props.match.params.id))\n            .then(result => this.setState({album: result}));\n    }\n\n    openDetails(picture) {\n        this.setState({openPicture: picture});\n    }\n\n    onCrossClick() {\n        this.setState({openPicture: null});\n    }\n\n    deleteItem(picture) {\n        this.props.deleteFotoFromAlbum(picture.id, this.state.album.id);\n        const newPictures = this.state.album.images.filter(p => p.id != picture.id);\n        const newAlbum = Object.assign({}, {\n            ...this.state.album,\n            images: newPictures,\n        })\n        this.setState({album: newAlbum});\n    }\n\n    changeDragState(obj) {\n        this.setState(obj);\n    }\n\n    saveFotoDescription(picture) {\n        const newPictures = [...this.state.album.images];\n        const editedPicture = this.state.album.images.find(p => p.id == picture.id);\n        editedPicture.name = this.input.value;\n        editedPicture.text = this.text.value;\n        const newAlbum = Object.assign({}, {\n            ...this.state.album,\n            images: newPictures,\n        });\n        this.setState({album: newAlbum});\n    }\n\n    render() {\n        const {openPicture,album} = this.state;\n        return album && (\n            <div className='edit_container'>\n                {album.images.sort((x,y) => x.order-y.order).map(p => <Card\n                    key={p.id}\n                    picture={p}\n                    pictures={album.images}\n                    openDetails={(p) => this.openDetails(p)}\n                    deleteItem={(p) => this.deleteItem(p)}\n                    replaceImage={(target) => this.replaceImage(target)}\n                    openPicture={openPicture}\n                    changeDragState={(obj) => this.changeDragState(obj)}\n                    dragState={this.state}\n                />)}\n                <FileInput className='new_image' disabled={openPicture} label='Choose new foto'/>\n                {openPicture &&\n                <div className='new_text' ref={t => this.text = t}>\n                    <input defaultValue={openPicture.name} ref={i => this.input = i}/>\n                    <textarea defaultValue={openPicture.text} ref={t => this.textarea = t}/>\n                    <SaveIcon className='save_icon' onClick={() => this.saveFotoDescription(openPicture)}/>\n                    <CrossIcon className='cross_icon' onClick={() => this.onCrossClick()}/>\n                </div>}\n\n            </div>\n        );\n    }\n}\n\nexport default EditAlbum;\n\n\n\n// WEBPACK FOOTER //\n// ./components/editAlbum/EditAlbum.jsx"],"sourceRoot":""}