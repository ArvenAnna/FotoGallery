{"version":3,"sources":["webpack:///./components/picture/PreviewImageFrame.jsx"],"names":["PreviewImageFrame","React","Component","constructor","props","img","current","images","find","src","currentIndex","indexOf","state","imageWidth","left","right","length","componentDidMount","setImageWidth","getImageContainerWidth","window","addEventListener","changeImageWidth","componentWillUnmount","removeEventListener","imageRect","getBoundingClientRect","style","currentStyle","getComputedStyle","width","componentDidUpdate","prevProps","prevState","setTimeout","shouldComponentUpdate","onCrossClick","close","onArrowClick","arrow","setState","render","node"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;;IAEMA,iB,GAAN,MAAMA,iBAAN,SAAgC,6CAAAC,CAAMC,SAAtC,CAAgD;;AAE9CC,cAAYC,KAAZ,EAAmB;AACjB,UAAMA,KAAN;;AAEA,SAAKC,GAAL,GAAW,IAAX;;AAEA,UAAMC,UAAUF,MAAMG,MAAN,CAAaC,IAAb,CAAkBH,OAAOA,QAAQD,MAAMK,GAAvC,CAAhB;AACA,UAAMC,eAAeN,MAAMG,MAAN,CAAaI,OAAb,CAAqBL,OAArB,CAArB;;AAEA,SAAKM,KAAL,GAAa;AACXC,kBAAY,CADD;AAEXJ,WAAKL,MAAMK,GAFA;AAGXK,YAAMJ,eAAe,CAHV;AAIXK,aAAOL,eAAgBN,MAAMG,MAAN,CAAaS,MAAb,GAAsB;AAJlC,KAAb;AAMD;;AAEDC,sBAAoB;AAClB,SAAKb,KAAL,CAAWc,aAAX,CAAyB,KAAKC,sBAAL,EAAzB;AACAC,WAAOC,gBAAP,CAAwB,QAAxB,EAAkC,MAAM,KAAKC,gBAAL,EAAxC;AACD;;AAEDC,yBAAuB;AACrBH,WAAOI,mBAAP,CAA2B,QAA3B,EAAqC,MAAM,KAAKF,gBAAL,EAA3C;AACD;;AAEDH,2BAAyB;AACvB,UAAMd,MAAM,KAAKA,GAAjB;AACA,QAAI,CAACA,GAAL,EAAU,OAAO,CAAP;AACV,UAAMoB,YAAYpB,IAAIqB,qBAAJ,EAAlB;AACA,UAAMC,QAAQtB,IAAIuB,YAAJ,IAAoBR,OAAOS,gBAAP,CAAwBxB,GAAxB,CAAlC;AACA;AACA,WAAOoB,UAAUK,KAAjB;AACD;;AAEDR,qBAAmB;AACjB,SAAKlB,KAAL,CAAWc,aAAX,CAAyB,KAAKC,sBAAL,EAAzB;AACD;;AAEDY,qBAAmBC,SAAnB,EAA8BC,SAA9B,EAAyC;AACvC,QAAIA,UAAUxB,GAAV,IAAiB,KAAKG,KAAL,CAAWH,GAAhC,EAAqC;AACnCW,aAAOc,UAAP,CAAkB,MAAM,KAAKZ,gBAAL,EAAxB,EAAiD,EAAjD;AACD;AACF;;AAEDa,0BAAwB;AACtB,WAAO,IAAP;AACD;;AAEDC,iBAAe;AACb,SAAKhC,KAAL,CAAWiC,KAAX;AACD;;AAEDC,eAAaC,KAAb,EAAoB;AAClB,UAAM,EAAChC,MAAD,KAAW,KAAKH,KAAtB;AACA,UAAME,UAAUC,OAAOC,IAAP,CAAYH,OAAOA,QAAQ,KAAKO,KAAL,CAAWH,GAAtC,CAAhB;AACA,UAAMC,eAAeH,OAAOI,OAAP,CAAeL,OAAf,CAArB;;AAEA,QAAIA,WAAWiC,UAAU,MAArB,IAA+B7B,eAAe,CAAlD,EAAqD;AACnD,WAAK8B,QAAL,CAAc;AACZ/B,aAAKF,OAAOG,eAAe,CAAtB,CADO;AAEZI,cAAOJ,eAAe,CAAhB,GAAqB,CAFf;AAGZK,eAAQL,eAAe,CAAhB,GAAsBH,OAAOS,MAAP,GAAgB;AAHjC,OAAd;AAKD;;AAED,QAAIV,WAAWiC,UAAU,OAArB,IAAgC7B,eAAgBH,OAAOS,MAAP,GAAgB,CAApE,EAAwE;AACtE,WAAKwB,QAAL,CAAc;AACZ/B,aAAKF,OAAOG,eAAe,CAAtB,CADO;AAEZI,cAAOJ,eAAe,CAAhB,GAAqB,CAFf;AAGZK,eAAQL,eAAe,CAAhB,GAAsBH,OAAOS,MAAP,GAAgB;AAHjC,OAAd;AAKD;AAEF;;AAEDyB,WAAS;AACP,UAAM,EAAChC,GAAD,EAAMK,IAAN,EAAYC,KAAZ,KAAqB,KAAKH,KAAhC;AACA,UAAM,EAACL,MAAD,KAAW,KAAKH,KAAtB;;AAEA,WAAQ;AAAA;AAAA,QAAK,WAAU,mCAAf;AACJ,kEAAC,yDAAD,IAAW,WAAU,OAArB,EAA6B,SAAS,MAAM,KAAKgC,YAAL,EAA5C,GADI;AAEHtB,cAAQ;AAAA;AAAA,UAAK,WAAU,YAAf;AACP,oEAAC,6DAAD,IAAe,SAAS,MAAM,KAAKwB,YAAL,CAAkB,MAAlB,CAA9B;AADO,OAFL;AAKHvB,eAAS;AAAA;AAAA,UAAK,WAAU,aAAf;AACR,oEAAC,8DAAD,IAAgB,SAAS,MAAM,KAAKuB,YAAL,CAAkB,OAAlB,CAA/B;AADQ,OALN;AAQJ;AAAA;AAAA,UAAK,WAAU,mBAAf;AACE;AAAA;AAAA,YAAK,WAAU,SAAf;AAA2B,aAAG/B,OAAOI,OAAP,CAAeF,GAAf,IAAsB,CAAG,OAAMF,OAAOS,MAAO;AAA3E;AADF,OARI;AAWJ,2EAAK,KAAKP,GAAV,EAAe,WAAU,eAAzB,EAAyC,KAAKiC,QAAQ,KAAKrC,GAAL,GAAWqC,IAAjE;AAXI,KAAR;AAcD;AA/F6C,C;;;AAkGhD,yDAAe1C,iBAAf,E","file":"0.45f1d0c4c2f022f16d54.hot-update.js","sourcesContent":["import React from \"react\";\nimport {CrossIcon, LeftArrowIcon, RightArrowIcon} from \"../Icons\";\nimport \"./preview.less\";\n\nclass PreviewImageFrame extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.img = null;\n\n    const current = props.images.find(img => img === props.src);\n    const currentIndex = props.images.indexOf(current);\n\n    this.state = {\n      imageWidth: 0,\n      src: props.src,\n      left: currentIndex > 0,\n      right: currentIndex < (props.images.length - 1)\n    };\n  }\n\n  componentDidMount() {\n    this.props.setImageWidth(this.getImageContainerWidth());\n    window.addEventListener('resize', () => this.changeImageWidth());\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', () => this.changeImageWidth());\n  }\n\n  getImageContainerWidth() {\n    const img = this.img;\n    if (!img) return 0;\n    const imageRect = img.getBoundingClientRect();\n    const style = img.currentStyle || window.getComputedStyle(img);\n    //const margin = parseFloat(style.borderLeft) + parseFloat(style.borderRight);\n    return imageRect.width;\n  }\n\n  changeImageWidth() {\n    this.props.setImageWidth(this.getImageContainerWidth());\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.src != this.state.src) {\n      window.setTimeout(() => this.changeImageWidth(), 10);\n    }\n  }\n\n  shouldComponentUpdate() {\n    return true;\n  }\n\n  onCrossClick() {\n    this.props.close();\n  }\n\n  onArrowClick(arrow) {\n    const {images} = this.props;\n    const current = images.find(img => img === this.state.src);\n    const currentIndex = images.indexOf(current);\n\n    if (current && arrow === 'left' && currentIndex > 0) {\n      this.setState({\n        src: images[currentIndex - 1],\n        left: (currentIndex - 1) > 0,\n        right: (currentIndex - 1) < (images.length - 1)\n      });\n    }\n\n    if (current && arrow === 'right' && currentIndex < (images.length - 1)) {\n      this.setState({\n        src: images[currentIndex + 1],\n        left: (currentIndex + 1) > 0,\n        right: (currentIndex + 1) < (images.length - 1)\n      })\n    }\n\n  }\n\n  render() {\n    const {src, left, right} = this.state;\n    const {images} = this.props;\n\n    return (<div className='magnify_modal_img_frame_container'>\n        <CrossIcon className='cross' onClick={() => this.onCrossClick()}/>\n        {left && <div className='left_arrow'>\n          <LeftArrowIcon onClick={() => this.onArrowClick('left')}/>\n        </div>}\n        {right && <div className='right_arrow'>\n          <RightArrowIcon onClick={() => this.onArrowClick('right')}/>\n        </div>}\n        <div className='counter_container'>\n          <div className='counter'>{`${(images.indexOf(src) + 1)} of ${images.length}`}</div>\n        </div>\n        <img src={src} className='image_preview' ref={node => this.img = node}/>\n      </div>\n    );\n  }\n}\n\nexport default PreviewImageFrame;\n\n\n// WEBPACK FOOTER //\n// ./components/picture/PreviewImageFrame.jsx"],"sourceRoot":""}